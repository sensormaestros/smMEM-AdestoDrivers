<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Adesto Flash Demo: Adesto_FlashDrivers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="EMSTRS, LightBulb, 200x284.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Adesto Flash Demo
   &#160;<span id="projectnumber">V1.0</span>
   </div>
   <div id="projectbrief">Adesto Flash/Resistive Memory Evaluation and Drivers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___adesto___flash_drivers.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Modules</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Adesto_FlashDrivers</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structerase__info__t.html">erase_info_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspiflash__info__t.html">spiflash_info_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gadfac3535a6d4b8cf84ea9b7091ce23a8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gadfac3535a6d4b8cf84ea9b7091ce23a8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>LED_DEBUG</b></td></tr>
<tr class="separator:gadfac3535a6d4b8cf84ea9b7091ce23a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93ebbed2b75a772b7de8798a541ec444"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga93ebbed2b75a772b7de8798a541ec444"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_READ_ARRAY</b>&#160;&#160;&#160;0x0b</td></tr>
<tr class="separator:ga93ebbed2b75a772b7de8798a541ec444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga33d7b230babbe64817f19e56b538a6de"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga33d7b230babbe64817f19e56b538a6de"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_READ_ARRAY_SLOW</b>&#160;&#160;&#160;0x03  /* no dummy byte, but limited to lower clock rate */</td></tr>
<tr class="separator:ga33d7b230babbe64817f19e56b538a6de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6785a21e3699263a950ae451d6df5fe1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga6785a21e3699263a950ae451d6df5fe1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_READ_ARRAY_DUAL</b>&#160;&#160;&#160;0x3b  /* not used, as we don't have dual-SPI hardware */</td></tr>
<tr class="separator:ga6785a21e3699263a950ae451d6df5fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ad4f3c79e22cad08bda8d0c62fd6572"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0ad4f3c79e22cad08bda8d0c62fd6572"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_PAGE_ERASE</b>&#160;&#160;&#160;0x81</td></tr>
<tr class="separator:ga0ad4f3c79e22cad08bda8d0c62fd6572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2acd3a26e516f4fd940dfaa6f7834525"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2acd3a26e516f4fd940dfaa6f7834525"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_RM25C_PAGE_ERASE</b>&#160;&#160;&#160;0x42  /* RM26C256DS only */</td></tr>
<tr class="separator:ga2acd3a26e516f4fd940dfaa6f7834525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb3cdec516cb0c6596a8f48462e7fde5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabb3cdec516cb0c6596a8f48462e7fde5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_BLOCK_ERASE</b>&#160;&#160;&#160;0x20</td></tr>
<tr class="separator:gabb3cdec516cb0c6596a8f48462e7fde5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9cbfb2608139bd5d3876594c5c775a68"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9cbfb2608139bd5d3876594c5c775a68"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_BLOCK_ERASE_LARGE</b>&#160;&#160;&#160;0x52</td></tr>
<tr class="separator:ga9cbfb2608139bd5d3876594c5c775a68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd70fef091798d062b8fa27bc1ed5c74"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gacd70fef091798d062b8fa27bc1ed5c74"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_BLOCK_ERASE_LARGER</b>&#160;&#160;&#160;0xd8</td></tr>
<tr class="separator:gacd70fef091798d062b8fa27bc1ed5c74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3652596b959bac52501e1336712bac3c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3652596b959bac52501e1336712bac3c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_CHIP_ERASE</b>&#160;&#160;&#160;0x60</td></tr>
<tr class="separator:ga3652596b959bac52501e1336712bac3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5395520c1b2a3e28494a8b2e71cf0bf3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5395520c1b2a3e28494a8b2e71cf0bf3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_CHIP_ERASE2</b>&#160;&#160;&#160;0xc7  /* not used, exactly the same as CMD_CHIP_ERASE */</td></tr>
<tr class="separator:ga5395520c1b2a3e28494a8b2e71cf0bf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd4702deb1bc052a40b648e6c6a11286"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gacd4702deb1bc052a40b648e6c6a11286"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_BYTE_PAGE_PROGRAM</b>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:gacd4702deb1bc052a40b648e6c6a11286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30d8922fb36cde274a74f248c46d768d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga30d8922fb36cde274a74f248c46d768d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_SEQUENTIAL_PROGRAM</b>&#160;&#160;&#160;0xad  /* not used, page program is more efficient */</td></tr>
<tr class="separator:ga30d8922fb36cde274a74f248c46d768d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2830ba8c50289fd7b6b2bce1db08db93"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2830ba8c50289fd7b6b2bce1db08db93"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_SEQUENTIAL_PROGRAM2</b>&#160;&#160;&#160;0xaf  /* not used, page program is more efficient */</td></tr>
<tr class="separator:ga2830ba8c50289fd7b6b2bce1db08db93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga948d4cb7957e87ef2ce006f18d1b6fb9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga948d4cb7957e87ef2ce006f18d1b6fb9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_BYTE_PAGE_PROGRAM_DUAL</b>&#160;&#160;&#160;0xa2  /* not used, as we don't have dual-SPI hardware */</td></tr>
<tr class="separator:ga948d4cb7957e87ef2ce006f18d1b6fb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f070c1bf485352b2392f685b3ae0ed5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8f070c1bf485352b2392f685b3ae0ed5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_WRITE_ENABLE</b>&#160;&#160;&#160;0x06</td></tr>
<tr class="separator:ga8f070c1bf485352b2392f685b3ae0ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97e9748a0452b32312adbc63707161d8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga97e9748a0452b32312adbc63707161d8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_WRITE_DISABLE</b>&#160;&#160;&#160;0x04</td></tr>
<tr class="separator:ga97e9748a0452b32312adbc63707161d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9417c1b47d21d8c9b1bf71b5f809d1a5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9417c1b47d21d8c9b1bf71b5f809d1a5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_PROTECT_SECTOR</b>&#160;&#160;&#160;0x36</td></tr>
<tr class="separator:ga9417c1b47d21d8c9b1bf71b5f809d1a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b67d91f75596ee62f84f72ad31011b7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5b67d91f75596ee62f84f72ad31011b7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_UNPROTECT_SECTOR</b>&#160;&#160;&#160;0x39</td></tr>
<tr class="separator:ga5b67d91f75596ee62f84f72ad31011b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59f568068c446ac445122829cccd4c04"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga59f568068c446ac445122829cccd4c04"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_READ_SECTOR_PROTECTION</b>&#160;&#160;&#160;0x3c</td></tr>
<tr class="separator:ga59f568068c446ac445122829cccd4c04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga765d9e04e320e320dc84061c0783fc6f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga765d9e04e320e320dc84061c0783fc6f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_PROGRAM_OTP</b>&#160;&#160;&#160;0x9b</td></tr>
<tr class="separator:ga765d9e04e320e320dc84061c0783fc6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7bf80dd27531f623dc57acb6b0ca86c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf7bf80dd27531f623dc57acb6b0ca86c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_READ_OTP</b>&#160;&#160;&#160;0x77</td></tr>
<tr class="separator:gaf7bf80dd27531f623dc57acb6b0ca86c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e6939d67b2c530299b8df6bb5534b77"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9e6939d67b2c530299b8df6bb5534b77"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_READ_STATUS</b>&#160;&#160;&#160;0x05</td></tr>
<tr class="separator:ga9e6939d67b2c530299b8df6bb5534b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f9d8cef8062218ea5ef7af602542246"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8f9d8cef8062218ea5ef7af602542246"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_DATAFLASH_READ_STATUS</b>&#160;&#160;&#160;0xd7</td></tr>
<tr class="separator:ga8f9d8cef8062218ea5ef7af602542246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga192d4488cd4f41c299fdf8f5720ff604"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga192d4488cd4f41c299fdf8f5720ff604"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_ACTIVE_STATUS_INTERRUPT</b>&#160;&#160;&#160;0x25</td></tr>
<tr class="separator:ga192d4488cd4f41c299fdf8f5720ff604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d2b4ce439612988458be2659ab44cba"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7d2b4ce439612988458be2659ab44cba"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_WRITE_STATUS_REG_BYTE_1</b>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:ga7d2b4ce439612988458be2659ab44cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ec506390610a2901b869d767a199dab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1ec506390610a2901b869d767a199dab"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_WRITE_STATUS_REG_BYTE_2</b>&#160;&#160;&#160;0x31</td></tr>
<tr class="separator:ga1ec506390610a2901b869d767a199dab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe1dd8546b0a8cd30b19a0229205c8df"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafe1dd8546b0a8cd30b19a0229205c8df"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_RESET</b>&#160;&#160;&#160;0xf0</td></tr>
<tr class="separator:gafe1dd8546b0a8cd30b19a0229205c8df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae664c66915cfa247a7eff19830b1739a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae664c66915cfa247a7eff19830b1739a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_READ_ID</b>&#160;&#160;&#160;0x9f</td></tr>
<tr class="separator:gae664c66915cfa247a7eff19830b1739a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga333aa696628d0a91164f398a582aa7b0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga333aa696628d0a91164f398a582aa7b0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_DEEP_POWER_DOWN</b>&#160;&#160;&#160;0xb9</td></tr>
<tr class="separator:ga333aa696628d0a91164f398a582aa7b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae34d06d7806c37f338faec14ce8392e5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae34d06d7806c37f338faec14ce8392e5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_RESUME_FROM_DEEP_POWER_DOWN</b>&#160;&#160;&#160;0xab</td></tr>
<tr class="separator:gae34d06d7806c37f338faec14ce8392e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc420eac9073cd137656822f4bc8fb4c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabc420eac9073cd137656822f4bc8fb4c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_ULTRA_DEEP_POWER_DOWN</b>&#160;&#160;&#160;0x79</td></tr>
<tr class="separator:gabc420eac9073cd137656822f4bc8fb4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60409d3637ab3dbe82427cbbedc8ebd8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga60409d3637ab3dbe82427cbbedc8ebd8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ARG_RESET</b>&#160;&#160;&#160;0xd0  /* second byte required for reset command */</td></tr>
<tr class="separator:ga60409d3637ab3dbe82427cbbedc8ebd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc4282fd368b858ebbfb9fc79a6cac43"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafc4282fd368b858ebbfb9fc79a6cac43"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_DATAFLASH_BLOCK_ERASE</b>&#160;&#160;&#160;0x50  /* 8 pages, 2KB */</td></tr>
<tr class="separator:gafc4282fd368b858ebbfb9fc79a6cac43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77a790c406e15d0c12dd6b7b113adbe1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga77a790c406e15d0c12dd6b7b113adbe1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_DATAFLASH_SECTOR_ERASE</b>&#160;&#160;&#160;0x7c</td></tr>
<tr class="separator:ga77a790c406e15d0c12dd6b7b113adbe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5ed1402112f31f5a2bb27cd7e7e3c20e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5ed1402112f31f5a2bb27cd7e7e3c20e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_DATAFLASH_RMW_BUF1</b>&#160;&#160;&#160;0x58</td></tr>
<tr class="separator:ga5ed1402112f31f5a2bb27cd7e7e3c20e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb40b19037e6d9f649da7178f35397a4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafb40b19037e6d9f649da7178f35397a4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_DATAFLASH_RMW_BUF2</b>&#160;&#160;&#160;0x59</td></tr>
<tr class="separator:gafb40b19037e6d9f649da7178f35397a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd9c608cd06e8c87fa239088923d8b80"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafd9c608cd06e8c87fa239088923d8b80"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPIFLASH_INFO_TABLE_SIZE</b>&#160;&#160;&#160;(sizeof(spiflash_info_table) / sizeof(<a class="el" href="structspiflash__info__t.html">spiflash_info_t</a>))</td></tr>
<tr class="separator:gafd9c608cd06e8c87fa239088923d8b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b7865ea5681c079813edab833219bad"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1b7865ea5681c079813edab833219bad"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_FLASH_ID_LEN</b>&#160;&#160;&#160;8</td></tr>
<tr class="separator:ga1b7865ea5681c079813edab833219bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaffcfe9058a60ecc1b23bf6efe59c0851"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaffcfe9058a60ecc1b23bf6efe59c0851"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_ERASE_SIZES</b>&#160;&#160;&#160;5</td></tr>
<tr class="separator:gaffcfe9058a60ecc1b23bf6efe59c0851"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gad5f8c416154529a86249736167d7afda"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad5f8c416154529a86249736167d7afda"></a>
typedef void&#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_completion_fn_t</b> (void *ref)</td></tr>
<tr class="separator:gad5f8c416154529a86249736167d7afda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gab523b5b85ebcb5f51c636532b7f5543c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab523b5b85ebcb5f51c636532b7f5543c"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_id_t</b> { <br />
&#160;&#160;<b>AT25SF041</b>, 
<b>AT25XE021A</b>, 
<b>AT25XE041B</b>, 
<b>AT25DB081E</b>, 
<br />
&#160;&#160;<b>AT25DB641E</b>, 
<b>RM25C256DS</b>, 
<b>PART_UNKNOWN</b>
<br />
 }</td></tr>
<tr class="separator:gab523b5b85ebcb5f51c636532b7f5543c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf44fef2341a203b1472c8fc3ee92ab62"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gaf44fef2341a203b1472c8fc3ee92ab62">addr_aligned</a> (uint32_t addr, size_t alignment_size)</td></tr>
<tr class="memdesc:gaf44fef2341a203b1472c8fc3ee92ab62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if address is aligned on a power of 2.  <a href="#gaf44fef2341a203b1472c8fc3ee92ab62">More...</a><br /></td></tr>
<tr class="separator:gaf44fef2341a203b1472c8fc3ee92ab62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga802afbf6aa97cd013063a170fd0b9d01"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a> (void *ref)</td></tr>
<tr class="memdesc:ga802afbf6aa97cd013063a170fd0b9d01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple spi simple completion routine.  <a href="#ga802afbf6aa97cd013063a170fd0b9d01">More...</a><br /></td></tr>
<tr class="separator:ga802afbf6aa97cd013063a170fd0b9d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b03d647a43eef67874656ceb0f475a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a> (uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:ga2b03d647a43eef67874656ceb0f475a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Flash Single Byte Command.  <a href="#ga2b03d647a43eef67874656ceb0f475a5">More...</a><br /></td></tr>
<tr class="separator:ga2b03d647a43eef67874656ceb0f475a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9257fe096c874ec8e228c219f0720e8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a> (size_t tx_len, const uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, bool hold_cs_active, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:ga9257fe096c874ec8e228c219f0720e8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Flash Multi-Byte Command.  <a href="#ga9257fe096c874ec8e228c219f0720e8a">More...</a><br /></td></tr>
<tr class="separator:ga9257fe096c874ec8e228c219f0720e8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga234623d2faa1b7fb7933b3a17b1e6f2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a> (uint8_t cmd, uint32_t addr, unsigned int dummy_bytes, size_t tx_len, uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:ga234623d2faa1b7fb7933b3a17b1e6f2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Flash Command with Address.  <a href="#ga234623d2faa1b7fb7933b3a17b1e6f2e">More...</a><br /></td></tr>
<tr class="separator:ga234623d2faa1b7fb7933b3a17b1e6f2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ff84df85a60470c3b2a1640b5d38401"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga3ff84df85a60470c3b2a1640b5d38401">spiflash_read</a> (uint32_t addr, size_t len, uint8_t *buffer, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:ga3ff84df85a60470c3b2a1640b5d38401"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Flash Read.  <a href="#ga3ff84df85a60470c3b2a1640b5d38401">More...</a><br /></td></tr>
<tr class="separator:ga3ff84df85a60470c3b2a1640b5d38401"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f29d3eb34622d3d131210edbf9c8e51"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga4f29d3eb34622d3d131210edbf9c8e51">spiflash_erase_completion1</a> (void *ref)</td></tr>
<tr class="memdesc:ga4f29d3eb34622d3d131210edbf9c8e51"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Erase Completion State 1(initial state)  <a href="#ga4f29d3eb34622d3d131210edbf9c8e51">More...</a><br /></td></tr>
<tr class="separator:ga4f29d3eb34622d3d131210edbf9c8e51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga11759ffd06963745c44b946693f913d8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga11759ffd06963745c44b946693f913d8">spiflash_erase_completion2</a> (void *ref)</td></tr>
<tr class="memdesc:ga11759ffd06963745c44b946693f913d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Erase Completion State 2.  <a href="#ga11759ffd06963745c44b946693f913d8">More...</a><br /></td></tr>
<tr class="separator:ga11759ffd06963745c44b946693f913d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4a5762b3aabf337eec881e59246b445"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gab4a5762b3aabf337eec881e59246b445">spiflash_erase_completion3</a> (void *ref)</td></tr>
<tr class="memdesc:gab4a5762b3aabf337eec881e59246b445"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Erase Completion State 3.  <a href="#gab4a5762b3aabf337eec881e59246b445">More...</a><br /></td></tr>
<tr class="separator:gab4a5762b3aabf337eec881e59246b445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38e3f9577a47d477243dc5c1673fece3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga38e3f9577a47d477243dc5c1673fece3">spiflash_erase_completion4</a> (void *ref)</td></tr>
<tr class="memdesc:ga38e3f9577a47d477243dc5c1673fece3"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Erase Completion State 4.  <a href="#ga38e3f9577a47d477243dc5c1673fece3">More...</a><br /></td></tr>
<tr class="separator:ga38e3f9577a47d477243dc5c1673fece3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf98eafe46ea695ca330940a8cbc6c6e1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gaf98eafe46ea695ca330940a8cbc6c6e1">spiflash_erase_completion5</a> (void *ref)</td></tr>
<tr class="memdesc:gaf98eafe46ea695ca330940a8cbc6c6e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Erase Completion State 5.  <a href="#gaf98eafe46ea695ca330940a8cbc6c6e1">More...</a><br /></td></tr>
<tr class="separator:gaf98eafe46ea695ca330940a8cbc6c6e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4693e905f3ba71b0ce6c7e4f451c420b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga4693e905f3ba71b0ce6c7e4f451c420b">spiflash_erase</a> (uint32_t addr, size_t len, uint32_t cmd_size, bool use_so_irq, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:ga4693e905f3ba71b0ce6c7e4f451c420b"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Flash Erase.  <a href="#ga4693e905f3ba71b0ce6c7e4f451c420b">More...</a><br /></td></tr>
<tr class="separator:ga4693e905f3ba71b0ce6c7e4f451c420b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3a21ea4a25e15decdbb0c09217b3d96"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gab3a21ea4a25e15decdbb0c09217b3d96">spiflash_write_completion1</a> (void *ref)</td></tr>
<tr class="memdesc:gab3a21ea4a25e15decdbb0c09217b3d96"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Write Completion State 1(initial state)  <a href="#gab3a21ea4a25e15decdbb0c09217b3d96">More...</a><br /></td></tr>
<tr class="separator:gab3a21ea4a25e15decdbb0c09217b3d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9a7f08ea97dea0f88b308f6f3a7d553"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gae9a7f08ea97dea0f88b308f6f3a7d553">spiflash_write_completion2</a> (void *ref)</td></tr>
<tr class="memdesc:gae9a7f08ea97dea0f88b308f6f3a7d553"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Write Completion State 2.  <a href="#gae9a7f08ea97dea0f88b308f6f3a7d553">More...</a><br /></td></tr>
<tr class="separator:gae9a7f08ea97dea0f88b308f6f3a7d553"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23c4aba89465f421fe8e57d830a35f85"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga23c4aba89465f421fe8e57d830a35f85">spiflash_write_completion3</a> (void *ref)</td></tr>
<tr class="memdesc:ga23c4aba89465f421fe8e57d830a35f85"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Write Completion State 3.  <a href="#ga23c4aba89465f421fe8e57d830a35f85">More...</a><br /></td></tr>
<tr class="separator:ga23c4aba89465f421fe8e57d830a35f85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f31bfac731c959f4279c335d6244ea3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga2f31bfac731c959f4279c335d6244ea3">spiflash_write_completion4</a> (void *ref)</td></tr>
<tr class="memdesc:ga2f31bfac731c959f4279c335d6244ea3"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Write Completion State 4.  <a href="#ga2f31bfac731c959f4279c335d6244ea3">More...</a><br /></td></tr>
<tr class="separator:ga2f31bfac731c959f4279c335d6244ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44e65f28587374feade08a939ea286a1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga44e65f28587374feade08a939ea286a1">spiflash_write_completion5</a> (void *ref)</td></tr>
<tr class="memdesc:ga44e65f28587374feade08a939ea286a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Write Completion State 5.  <a href="#ga44e65f28587374feade08a939ea286a1">More...</a><br /></td></tr>
<tr class="separator:ga44e65f28587374feade08a939ea286a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa4aceecfc2b182f8298e96be69699fa2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gaa4aceecfc2b182f8298e96be69699fa2">spiflash_write</a> (uint32_t addr, size_t len, uint8_t *buffer, bool use_so_irq, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:gaa4aceecfc2b182f8298e96be69699fa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Flash Write.  <a href="#gaa4aceecfc2b182f8298e96be69699fa2">More...</a><br /></td></tr>
<tr class="separator:gaa4aceecfc2b182f8298e96be69699fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac342dcf953e34c747952b925f7ffa15b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gac342dcf953e34c747952b925f7ffa15b">dataflash_rmw_completion1</a> (void *ref)</td></tr>
<tr class="memdesc:gac342dcf953e34c747952b925f7ffa15b"><td class="mdescLeft">&#160;</td><td class="mdescRight">DataFlash Read-Modify-Write Completion State 1(initial state)  <a href="#gac342dcf953e34c747952b925f7ffa15b">More...</a><br /></td></tr>
<tr class="separator:gac342dcf953e34c747952b925f7ffa15b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23109973f56d9ff334994fda708eb471"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga23109973f56d9ff334994fda708eb471">dataflash_rmw_completion2</a> (void *ref)</td></tr>
<tr class="memdesc:ga23109973f56d9ff334994fda708eb471"><td class="mdescLeft">&#160;</td><td class="mdescRight">DataFlash Read-Modify-Write Completion State 2.  <a href="#ga23109973f56d9ff334994fda708eb471">More...</a><br /></td></tr>
<tr class="separator:ga23109973f56d9ff334994fda708eb471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga557a31339763a26d1da79ce12e1018cc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga557a31339763a26d1da79ce12e1018cc">dataflash_rmw_completion3</a> (void *ref)</td></tr>
<tr class="memdesc:ga557a31339763a26d1da79ce12e1018cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">DataFlash Read-Modify-Write Completion State 3.  <a href="#ga557a31339763a26d1da79ce12e1018cc">More...</a><br /></td></tr>
<tr class="separator:ga557a31339763a26d1da79ce12e1018cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe7e56bc15d57c891233dba867161f7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gafe7e56bc15d57c891233dba867161f7a">dataflash_rmw</a> (uint32_t addr, size_t len, uint8_t *buffer, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:gafe7e56bc15d57c891233dba867161f7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI DataFlash Read-Modify-Write Function.  <a href="#gafe7e56bc15d57c891233dba867161f7a">More...</a><br /></td></tr>
<tr class="separator:gafe7e56bc15d57c891233dba867161f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2fce6429b340b5157119e9db80f3807f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga2fce6429b340b5157119e9db80f3807f">spiflash_set_write_enable</a> (bool enable, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:ga2fce6429b340b5157119e9db80f3807f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send Write Enable/Disable Command.  <a href="#ga2fce6429b340b5157119e9db80f3807f">More...</a><br /></td></tr>
<tr class="separator:ga2fce6429b340b5157119e9db80f3807f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3565e672698a1e2a14a8d7ada7a1b7c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga3565e672698a1e2a14a8d7ada7a1b7c3">spiflash_set_sector_protection</a> (bool protect, uint32_t addr, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:ga3565e672698a1e2a14a8d7ada7a1b7c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send Sector Protect/Unprotect Command.  <a href="#ga3565e672698a1e2a14a8d7ada7a1b7c3">More...</a><br /></td></tr>
<tr class="separator:ga3565e672698a1e2a14a8d7ada7a1b7c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga089adb24549564837ea0b4eafd1f22d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga089adb24549564837ea0b4eafd1f22d6">spiflash_set_global_protect</a> (bool protect, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:ga089adb24549564837ea0b4eafd1f22d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send Global Protect Command.  <a href="#ga089adb24549564837ea0b4eafd1f22d6">More...</a><br /></td></tr>
<tr class="separator:ga089adb24549564837ea0b4eafd1f22d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae65c98d024b208f13e9a82a11d72ee73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gae65c98d024b208f13e9a82a11d72ee73">spiflash_reset</a> (spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:gae65c98d024b208f13e9a82a11d72ee73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send Reset Command.  <a href="#gae65c98d024b208f13e9a82a11d72ee73">More...</a><br /></td></tr>
<tr class="separator:gae65c98d024b208f13e9a82a11d72ee73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f2f3bcd7f1fbc3220f44e14232a92be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga0f2f3bcd7f1fbc3220f44e14232a92be">spiflash_read_otp</a> (uint32_t addr, size_t len, uint8_t *buffer, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:ga0f2f3bcd7f1fbc3220f44e14232a92be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send Read OTP command.  <a href="#ga0f2f3bcd7f1fbc3220f44e14232a92be">More...</a><br /></td></tr>
<tr class="separator:ga0f2f3bcd7f1fbc3220f44e14232a92be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf29ddeb2b1fcf847cf60d8759e5b35a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gaf29ddeb2b1fcf847cf60d8759e5b35a0">spiflash_write_otp</a> (uint32_t addr, size_t len, uint8_t *buffer, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:gaf29ddeb2b1fcf847cf60d8759e5b35a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send Write OTP command.  <a href="#gaf29ddeb2b1fcf847cf60d8759e5b35a0">More...</a><br /></td></tr>
<tr class="separator:gaf29ddeb2b1fcf847cf60d8759e5b35a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d551516fc83d3aae41b4987b8349df6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga4d551516fc83d3aae41b4987b8349df6">spiflash_read_status</a> (size_t len, uint8_t *buffer, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:ga4d551516fc83d3aae41b4987b8349df6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read Status Register.  <a href="#ga4d551516fc83d3aae41b4987b8349df6">More...</a><br /></td></tr>
<tr class="separator:ga4d551516fc83d3aae41b4987b8349df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89e9b3d3cef2503f7857897e834ecb5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga89e9b3d3cef2503f7857897e834ecb5a">spiflash_write_status</a> (uint8_t data, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:ga89e9b3d3cef2503f7857897e834ecb5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write First Status Register.  <a href="#ga89e9b3d3cef2503f7857897e834ecb5a">More...</a><br /></td></tr>
<tr class="separator:ga89e9b3d3cef2503f7857897e834ecb5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadcefeebcf7e0d704fa2ae8518358650b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gadcefeebcf7e0d704fa2ae8518358650b">spiflash_write_status2</a> (uint8_t data, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:gadcefeebcf7e0d704fa2ae8518358650b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write Second Status Register.  <a href="#gadcefeebcf7e0d704fa2ae8518358650b">More...</a><br /></td></tr>
<tr class="separator:gadcefeebcf7e0d704fa2ae8518358650b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1d95c936880a6f204162f4e0b13fb71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gab1d95c936880a6f204162f4e0b13fb71">spiflash_read_id</a> (size_t len, uint8_t *buffer, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:gab1d95c936880a6f204162f4e0b13fb71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read Device ID.  <a href="#gab1d95c936880a6f204162f4e0b13fb71">More...</a><br /></td></tr>
<tr class="separator:gab1d95c936880a6f204162f4e0b13fb71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaccb9b47d267fe4fe7a227255d72da033"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gaccb9b47d267fe4fe7a227255d72da033">spiflash_deep_power_down</a> (bool power_down, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:gaccb9b47d267fe4fe7a227255d72da033"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter/Resume from Deep PowerDown.  <a href="#gaccb9b47d267fe4fe7a227255d72da033">More...</a><br /></td></tr>
<tr class="separator:gaccb9b47d267fe4fe7a227255d72da033"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad5f2379bf9e55111af2df65e0b0dc1ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gad5f2379bf9e55111af2df65e0b0dc1ab">spiflash_ultra_deep_power_down</a> (bool power_down, spiflash_completion_fn_t *completion, void *completion_ref)</td></tr>
<tr class="memdesc:gad5f2379bf9e55111af2df65e0b0dc1ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter/Resume from Ultra Deep PowerDown.  <a href="#gad5f2379bf9e55111af2df65e0b0dc1ab">More...</a><br /></td></tr>
<tr class="separator:gad5f2379bf9e55111af2df65e0b0dc1ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga71af2f398b0ab9019a5901e950bd9393"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga71af2f398b0ab9019a5901e950bd9393">spiflash_is_dataflash</a> (void)</td></tr>
<tr class="memdesc:ga71af2f398b0ab9019a5901e950bd9393"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if Device is DataFlash or note.  <a href="#ga71af2f398b0ab9019a5901e950bd9393">More...</a><br /></td></tr>
<tr class="separator:ga71af2f398b0ab9019a5901e950bd9393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7092383a12cfad7251c88b67064203d0"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga7092383a12cfad7251c88b67064203d0">dataflash_get_page_size</a> (void)</td></tr>
<tr class="memdesc:ga7092383a12cfad7251c88b67064203d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get DataFlash Page Size.  <a href="#ga7092383a12cfad7251c88b67064203d0">More...</a><br /></td></tr>
<tr class="separator:ga7092383a12cfad7251c88b67064203d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12b28bad4bc5d4243fc83b3159060cbf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga12b28bad4bc5d4243fc83b3159060cbf">dataflash_set_page_size</a> (uint32_t page_size)</td></tr>
<tr class="memdesc:ga12b28bad4bc5d4243fc83b3159060cbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set DataFlash Page Size.  <a href="#ga12b28bad4bc5d4243fc83b3159060cbf">More...</a><br /></td></tr>
<tr class="separator:ga12b28bad4bc5d4243fc83b3159060cbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf4fd8bbda8f88f5f64f73e2a899f7b4"><td class="memItemLeft" align="right" valign="top">spiflash_id_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#gabf4fd8bbda8f88f5f64f73e2a899f7b4">spiflash_init</a> (int bit_rate)</td></tr>
<tr class="memdesc:gabf4fd8bbda8f88f5f64f73e2a899f7b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SPI Bus, Read Device ID, Determine Device properties.  <a href="#gabf4fd8bbda8f88f5f64f73e2a899f7b4">More...</a><br /></td></tr>
<tr class="separator:gabf4fd8bbda8f88f5f64f73e2a899f7b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72c51f2e5a685e69165f1bc28f085a6a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___adesto___flash_drivers.html#ga72c51f2e5a685e69165f1bc28f085a6a">spiflash_smallest_erase_size_above</a> (uint32_t size)</td></tr>
<tr class="memdesc:ga72c51f2e5a685e69165f1bc28f085a6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine smallest Erase Page Size.  <a href="#ga72c51f2e5a685e69165f1bc28f085a6a">More...</a><br /></td></tr>
<tr class="separator:ga72c51f2e5a685e69165f1bc28f085a6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gacb559820d9ca11295b4500f179ef6392"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gacb559820d9ca11295b4500f179ef6392"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>i</b></td></tr>
<tr class="separator:gacb559820d9ca11295b4500f179ef6392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8a23a4688fcf60dc7c605d03ace9e84"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaf8a23a4688fcf60dc7c605d03ace9e84"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>cycle_count</b> = 0</td></tr>
<tr class="separator:gaf8a23a4688fcf60dc7c605d03ace9e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ee67ab5813f1f40fb52e5ad9737cc1f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8ee67ab5813f1f40fb52e5ad9737cc1f"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>at25xe021a_id_bytes</b> [] = { 0x1f, 0x43, 0x01, 0x00 }</td></tr>
<tr class="separator:ga8ee67ab5813f1f40fb52e5ad9737cc1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e9ba6ba16ae982e1e1781e3f178748a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4e9ba6ba16ae982e1e1781e3f178748a"></a>
static const size_t&#160;</td><td class="memItemRight" valign="bottom"><b>at25xe021a_protection_sector_sizes</b> [] = { 65536, 65536, 65536, 65536 }</td></tr>
<tr class="separator:ga4e9ba6ba16ae982e1e1781e3f178748a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeefbfa61b1d9eb0795003ed7fc2fd829"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaeefbfa61b1d9eb0795003ed7fc2fd829"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>at25xe041b_id_bytes</b> [] = { 0x1f, 0x44, 0x02, 0x00 }</td></tr>
<tr class="separator:gaeefbfa61b1d9eb0795003ed7fc2fd829"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89bca8ac74e53697d751af252a877373"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga89bca8ac74e53697d751af252a877373"></a>
static const size_t&#160;</td><td class="memItemRight" valign="bottom"><b>at25xe041b_protection_sector_sizes</b> [] = { 65536, 65536, 65536, 65536, 65536, 65536, 65536, 32768, 8192, 8192, 16384 }</td></tr>
<tr class="separator:ga89bca8ac74e53697d751af252a877373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50c7624f21f5d3fe31bcce70acd3ebf8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga50c7624f21f5d3fe31bcce70acd3ebf8"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>dataflash_cmd_set_256b_page</b> [] = { 0x3d, 0x2a, 0x80, 0xa6 }</td></tr>
<tr class="separator:ga50c7624f21f5d3fe31bcce70acd3ebf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga85ac78d76c1eebfd745459490d828cf6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga85ac78d76c1eebfd745459490d828cf6"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>dataflash_cmd_set_264b_page</b> [] = { 0x3d, 0x2a, 0x80, 0xa7 }</td></tr>
<tr class="separator:ga85ac78d76c1eebfd745459490d828cf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafeaf51e17dae1b12685d81716aaa8e3f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gafeaf51e17dae1b12685d81716aaa8e3f"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>dataflash_cmd_chip_erase</b> [] = { 0xc7, 0x94, 0x80, 0x9a }</td></tr>
<tr class="separator:gafeaf51e17dae1b12685d81716aaa8e3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4f71502c1cbfd8c44c8823645567695"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad4f71502c1cbfd8c44c8823645567695"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>dataflash_cmd_disable_sector_protection</b> [] = { 0x3d, 0x2a, 0x7f, 0x9a }</td></tr>
<tr class="separator:gad4f71502c1cbfd8c44c8823645567695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9234c9aa6265a378510c1d917f128297"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9234c9aa6265a378510c1d917f128297"></a>
const <a class="el" href="structspiflash__info__t.html">spiflash_info_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_info_table</b> []</td></tr>
<tr class="separator:ga9234c9aa6265a378510c1d917f128297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad49fec7a3631962cda6759a0f278b4da"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad49fec7a3631962cda6759a0f278b4da"></a>
static const <a class="el" href="structspiflash__info__t.html">spiflash_info_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_info</b></td></tr>
<tr class="separator:gad49fec7a3631962cda6759a0f278b4da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae14f6191dd4092be1d7530d9572b2a93"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae14f6191dd4092be1d7530d9572b2a93"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_use_so_irq</b></td></tr>
<tr class="separator:gae14f6191dd4092be1d7530d9572b2a93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1db68eb6d98efcbfe35d3f9b68f4b26a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1db68eb6d98efcbfe35d3f9b68f4b26a"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_busy</b></td></tr>
<tr class="separator:ga1db68eb6d98efcbfe35d3f9b68f4b26a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad84a4c61eb1e955c2961676d00535b24"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad84a4c61eb1e955c2961676d00535b24"></a>
static spiflash_completion_fn_t *&#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_completion</b></td></tr>
<tr class="separator:gad84a4c61eb1e955c2961676d00535b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacef0e0d5c3c4cd250b295a0062f2f529"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gacef0e0d5c3c4cd250b295a0062f2f529"></a>
static void *&#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_completion_ref</b></td></tr>
<tr class="separator:gacef0e0d5c3c4cd250b295a0062f2f529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f9ec56ef49741bcd7299ef5c5f090c7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9f9ec56ef49741bcd7299ef5c5f090c7"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_scratch_buf</b> [257]</td></tr>
<tr class="separator:ga9f9ec56ef49741bcd7299ef5c5f090c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabf6d450fcbcdfa41a0c59f8250340089"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabf6d450fcbcdfa41a0c59f8250340089"></a>
static const <a class="el" href="structerase__info__t.html">erase_info_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>erase_info_fixed</b></td></tr>
<tr class="separator:gabf6d450fcbcdfa41a0c59f8250340089"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f900ac1bcf6fbc92c6894945fc29dc0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5f900ac1bcf6fbc92c6894945fc29dc0"></a>
static const <a class="el" href="structerase__info__t.html">erase_info_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>erase_info</b></td></tr>
<tr class="separator:ga5f900ac1bcf6fbc92c6894945fc29dc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac173190376d2494140b528ba684114ea"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac173190376d2494140b528ba684114ea"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>erase_addr</b></td></tr>
<tr class="separator:gac173190376d2494140b528ba684114ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga50db61c2dd360d39a7df74086436e5d2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga50db61c2dd360d39a7df74086436e5d2"></a>
static size_t&#160;</td><td class="memItemRight" valign="bottom"><b>erase_len</b></td></tr>
<tr class="separator:ga50db61c2dd360d39a7df74086436e5d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3439411919e679f28c1e4163ecc05a12"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3439411919e679f28c1e4163ecc05a12"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>erase_status_buf</b> [2]</td></tr>
<tr class="separator:ga3439411919e679f28c1e4163ecc05a12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e62255948bf506eddc2f199c7d73ceb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga7e62255948bf506eddc2f199c7d73ceb"></a>
static volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_erase_busy</b></td></tr>
<tr class="separator:ga7e62255948bf506eddc2f199c7d73ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e44cc237dea99ba6e811cdf588bad68"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9e44cc237dea99ba6e811cdf588bad68"></a>
static uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>write_data</b></td></tr>
<tr class="separator:ga9e44cc237dea99ba6e811cdf588bad68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga918927f369681b3f7a4990f1495cc26e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga918927f369681b3f7a4990f1495cc26e"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>write_addr</b></td></tr>
<tr class="separator:ga918927f369681b3f7a4990f1495cc26e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3bed6b1473bd2057306a4f1fde991dba"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3bed6b1473bd2057306a4f1fde991dba"></a>
static size_t&#160;</td><td class="memItemRight" valign="bottom"><b>write_len</b></td></tr>
<tr class="separator:ga3bed6b1473bd2057306a4f1fde991dba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c66d71636dc3a8568d9b97b21a1ea14"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4c66d71636dc3a8568d9b97b21a1ea14"></a>
static size_t&#160;</td><td class="memItemRight" valign="bottom"><b>write_size</b></td></tr>
<tr class="separator:ga4c66d71636dc3a8568d9b97b21a1ea14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2ab49c7993724863c37e8f048fc0e758"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2ab49c7993724863c37e8f048fc0e758"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>write_status_buf</b> [2]</td></tr>
<tr class="separator:ga2ab49c7993724863c37e8f048fc0e758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga69328717b9eda1cd85aea519c9b07dc9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga69328717b9eda1cd85aea519c9b07dc9"></a>
static volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_write_busy</b></td></tr>
<tr class="separator:ga69328717b9eda1cd85aea519c9b07dc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9234c9aa6265a378510c1d917f128297"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9234c9aa6265a378510c1d917f128297"></a>
const <a class="el" href="structspiflash__info__t.html">spiflash_info_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>spiflash_info_table</b> []</td></tr>
<tr class="separator:ga9234c9aa6265a378510c1d917f128297"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaf44fef2341a203b1472c8fc3ee92ab62"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool addr_aligned </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>alignment_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Checks if address is aligned on a power of 2. </p>
<dl class="section note"><dt>Note</dt><dd>Determines if address is aligned to a multiple of alignment_size which is a power of 2. Alignment_size is read from Device table in <a class="el" href="spiflash_8c_source.html">spiflash.c</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address to check Power of 2 alignment </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">alignment_size</td><td>Alignment_size used to validate if Power of 2 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if aligned on Power of 2, False if not. </dd></dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00271">271</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l00717">spiflash_erase()</a>, and <a class="el" href="spiflash_8c_source.html#l00558">spiflash_erase_completion2()</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">return</span> (addr &amp; (alignment_size-1)) == 0;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga802afbf6aa97cd013063a170fd0b9d01"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spiflash_spi_simple_completion </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Simple spi simple completion routine. </p>
<dl class="section note"><dt>Note</dt><dd></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>TODO What is *ref ??? </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00285">285</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l01052">dataflash_rmw_completion3()</a>, <a class="el" href="spiflash_8c_source.html#l00419">spiflash_command_with_address()</a>, <a class="el" href="spiflash_8c_source.html#l00531">spiflash_erase_completion1()</a>, <a class="el" href="spiflash_8c_source.html#l00367">spiflash_multiple_byte_command()</a>, <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>, and <a class="el" href="spiflash_8c_source.html#l00820">spiflash_write_completion1()</a>.</p>
<div class="fragment"><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;{</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    (void) ref;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment">// copy completion fn ptr and ref arg, to avoid race condition</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">// if completion fn starts another spiflash command</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    spiflash_completion_fn_t *completion = spiflash_completion;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordtype">void</span> *spiflash_ref = spiflash_completion_ref;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    spiflash_completion = NULL;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    spiflash_busy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">if</span> (completion)</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        completion(spiflash_ref);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga2b03d647a43eef67874656ceb0f475a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_single_byte_command </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>rx_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Flash Single Byte Command. </p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5" title="SPI Flash Single Byte Command. ">spiflash_single_byte_command()</a> can be used to issue any single-byte command. The reading of the response will begin after the command byte is written. If no response is to be read, pass rx_len == 0. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>Command to send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_len</td><td>Expected response length, set to 0 if no response is expected. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*rx_buf</td><td>Pointer to Rx buffer where response is placed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion function for Completion State_Machine </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00319">319</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="low__power_8c_source.html#l00082">enter_low_power_state()</a>, <a class="el" href="spi_8c_source.html#l00327">spi_xfer()</a>, and <a class="el" href="spiflash_8c_source.html#l00285">spiflash_spi_simple_completion()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l01052">dataflash_rmw_completion3()</a>, <a class="el" href="spiflash_8c_source.html#l01365">spiflash_deep_power_down()</a>, <a class="el" href="spiflash_8c_source.html#l00531">spiflash_erase_completion1()</a>, <a class="el" href="spiflash_8c_source.html#l00558">spiflash_erase_completion2()</a>, <a class="el" href="spiflash_8c_source.html#l00673">spiflash_erase_completion5()</a>, <a class="el" href="spiflash_8c_source.html#l01344">spiflash_read_id()</a>, <a class="el" href="spiflash_8c_source.html#l01292">spiflash_read_status()</a>, <a class="el" href="spiflash_8c_source.html#l01127">spiflash_set_write_enable()</a>, <a class="el" href="spiflash_8c_source.html#l01386">spiflash_ultra_deep_power_down()</a>, <a class="el" href="spiflash_8c_source.html#l00820">spiflash_write_completion1()</a>, and <a class="el" href="spiflash_8c_source.html#l00933">spiflash_write_completion5()</a>.</p>
<div class="fragment"><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;{</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    spiflash_scratch_buf[0] = cmd;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    spiflash_completion = completion;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    spiflash_completion_ref = completion_ref;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    spiflash_busy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="group___s_p_i.html#ga9dd3eb81c6ecd8a3ce3f70d2315c0d07">spi_xfer</a>(1, spiflash_scratch_buf,  <span class="comment">// tx1</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;             0, NULL,                  <span class="comment">// tx2</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;             <span class="keyword">true</span>,                     <span class="comment">// half duplex</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;             rx_len, rx_buf,           <span class="comment">// rx</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;             <span class="keyword">false</span>,                    <span class="comment">// hold cs active</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;             <a class="code" href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a>,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;             NULL);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">if</span> (! completion)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">while</span> (spiflash_busy)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <a class="code" href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a>();</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div>
<div class="ttc" id="group___s_p_i_html_ga9dd3eb81c6ecd8a3ce3f70d2315c0d07"><div class="ttname"><a href="group___s_p_i.html#ga9dd3eb81c6ecd8a3ce3f70d2315c0d07">spi_xfer</a></div><div class="ttdeci">void spi_xfer(size_t tx_len, const uint8_t *tx_data, size_t tx2_len, const uint8_t *tx2_data, bool half_duplex, size_t rx_len, uint8_t *rx_data, bool hold_cs_active, spi_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI transfer function. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00327">spi.c:327</a></div></div>
<div class="ttc" id="group___low___power_html_gab58ec15d0bda335aa71a0e60a37d3f23"><div class="ttname"><a href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a></div><div class="ttdeci">void enter_low_power_state(void)</div><div class="ttdoc">Decides whether to put EFM into EM0, EM1, or EM2 based on Activity. </div><div class="ttdef"><b>Definition:</b> <a href="low__power_8c_source.html#l00082">low_power.c:82</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga802afbf6aa97cd013063a170fd0b9d01"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a></div><div class="ttdeci">static void spiflash_spi_simple_completion(void *ref)</div><div class="ttdoc">Simple spi simple completion routine. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00285">spiflash.c:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga9257fe096c874ec8e228c219f0720e8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_multiple_byte_command </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>tx_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>tx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>rx_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>hold_cs_active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Flash Multi-Byte Command. </p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a" title="SPI Flash Multi-Byte Command. ">spiflash_multiple_byte_command()</a> can be used to issue commands of any length. The reading of the response will begin after the last command byte is written. If no response is to be read, pass rx_len == 0. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_len</td><td>Length of command to send in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*tx_buf</td><td>Pointer to command buffer to send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_len</td><td>Expected response length, set to 0 if no response is expected. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*rx_buf</td><td>Pointer to Rx buffer where response is placed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hold_cs_active</td><td>Hold Chip Select High: True/False </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion function for Completion State_Machine </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00367">367</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="low__power_8c_source.html#l00082">enter_low_power_state()</a>, <a class="el" href="spi_8c_source.html#l00327">spi_xfer()</a>, and <a class="el" href="spiflash_8c_source.html#l00285">spiflash_spi_simple_completion()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l01095">dataflash_rmw()</a>, <a class="el" href="spiflash_8c_source.html#l01436">dataflash_set_page_size()</a>, <a class="el" href="spiflash_8c_source.html#l00717">spiflash_erase()</a>, <a class="el" href="spiflash_8c_source.html#l00558">spiflash_erase_completion2()</a>, <a class="el" href="spiflash_8c_source.html#l00623">spiflash_erase_completion3()</a>, <a class="el" href="spiflash_8c_source.html#l01202">spiflash_reset()</a>, <a class="el" href="spiflash_8c_source.html#l01174">spiflash_set_global_protect()</a>, <a class="el" href="spiflash_8c_source.html#l00971">spiflash_write()</a>, and <a class="el" href="spiflash_8c_source.html#l00875">spiflash_write_completion3()</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    spiflash_completion = completion;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    spiflash_completion_ref = completion_ref;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    spiflash_busy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="group___s_p_i.html#ga9dd3eb81c6ecd8a3ce3f70d2315c0d07">spi_xfer</a>(tx_len, tx_buf,  <span class="comment">// tx1</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;             0, NULL,         <span class="comment">// tx2</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;             <span class="keyword">true</span>,            <span class="comment">// half duplex</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;             rx_len, rx_buf,  <span class="comment">// rx</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;             hold_cs_active,  <span class="comment">// hold cs active</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;             <a class="code" href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a>,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;             NULL);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (! completion)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">while</span> (spiflash_busy)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <a class="code" href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a>();</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div>
<div class="ttc" id="group___s_p_i_html_ga9dd3eb81c6ecd8a3ce3f70d2315c0d07"><div class="ttname"><a href="group___s_p_i.html#ga9dd3eb81c6ecd8a3ce3f70d2315c0d07">spi_xfer</a></div><div class="ttdeci">void spi_xfer(size_t tx_len, const uint8_t *tx_data, size_t tx2_len, const uint8_t *tx2_data, bool half_duplex, size_t rx_len, uint8_t *rx_data, bool hold_cs_active, spi_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI transfer function. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00327">spi.c:327</a></div></div>
<div class="ttc" id="group___low___power_html_gab58ec15d0bda335aa71a0e60a37d3f23"><div class="ttname"><a href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a></div><div class="ttdeci">void enter_low_power_state(void)</div><div class="ttdoc">Decides whether to put EFM into EM0, EM1, or EM2 based on Activity. </div><div class="ttdef"><b>Definition:</b> <a href="low__power_8c_source.html#l00082">low_power.c:82</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga802afbf6aa97cd013063a170fd0b9d01"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a></div><div class="ttdeci">static void spiflash_spi_simple_completion(void *ref)</div><div class="ttdoc">Simple spi simple completion routine. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00285">spiflash.c:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga234623d2faa1b7fb7933b3a17b1e6f2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_command_with_address </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dummy_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>tx_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>tx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>rx_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Flash Command with Address. </p>
<dl class="section note"><dt>Note</dt><dd>spiflash_multiple_command_with_adddress() can be used to issue commands of any length. The reading of the response will begin after the last command byte is written. If no response is to be read, pass rx_len == 0. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>Command to send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address for command to use </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dumm_bytes</td><td>Dummy bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_len</td><td>Length of command to send in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*tx_buf</td><td>Pointer to command buffer to send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_len</td><td>Expected response length, set to 0 if no response is expected. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*rx_buf</td><td>Pointer to Rx buffer where response is placed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion function for Completion State_Machine </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00419">419</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="low__power_8c_source.html#l00082">enter_low_power_state()</a>, <a class="el" href="spi_8c_source.html#l00327">spi_xfer()</a>, and <a class="el" href="spiflash_8c_source.html#l00285">spiflash_spi_simple_completion()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l01016">dataflash_rmw_completion1()</a>, <a class="el" href="spiflash_8c_source.html#l00558">spiflash_erase_completion2()</a>, <a class="el" href="spiflash_8c_source.html#l00479">spiflash_read()</a>, <a class="el" href="spiflash_8c_source.html#l01231">spiflash_read_otp()</a>, <a class="el" href="spiflash_8c_source.html#l01149">spiflash_set_sector_protection()</a>, <a class="el" href="spiflash_8c_source.html#l00846">spiflash_write_completion2()</a>, and <a class="el" href="spiflash_8c_source.html#l01262">spiflash_write_otp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    spiflash_scratch_buf[i++] = cmd;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> (spiflash_info-&gt;address_bytes &gt;= 3)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        spiflash_scratch_buf[i++] = addr &gt;&gt; 16;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (spiflash_info-&gt;address_bytes &gt;= 2)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        spiflash_scratch_buf[i++] = (addr &gt;&gt; 8) &amp; 0xff;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (spiflash_info-&gt;address_bytes &gt;= 1)</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        spiflash_scratch_buf[i++] = addr &amp; 0xff;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    memset(&amp;spiflash_scratch_buf[i], 0, dummy_bytes);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    i += dummy_bytes;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    spiflash_completion = completion;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    spiflash_completion_ref = completion_ref;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    spiflash_busy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="group___s_p_i.html#ga9dd3eb81c6ecd8a3ce3f70d2315c0d07">spi_xfer</a>(i, spiflash_scratch_buf,  <span class="comment">// tx1</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;             tx_len, tx_buf,                         <span class="comment">// tx2</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;             <span class="keyword">true</span>,                                   <span class="comment">// half duplex</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;             rx_len, rx_buf,</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;             <span class="keyword">false</span>,                    <span class="comment">// hold cs active</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;             <a class="code" href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a>,</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;             NULL);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">if</span> (! completion)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">while</span> (spiflash_busy)</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <a class="code" href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a>();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;}</div>
<div class="ttc" id="group___s_p_i_html_ga9dd3eb81c6ecd8a3ce3f70d2315c0d07"><div class="ttname"><a href="group___s_p_i.html#ga9dd3eb81c6ecd8a3ce3f70d2315c0d07">spi_xfer</a></div><div class="ttdeci">void spi_xfer(size_t tx_len, const uint8_t *tx_data, size_t tx2_len, const uint8_t *tx2_data, bool half_duplex, size_t rx_len, uint8_t *rx_data, bool hold_cs_active, spi_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI transfer function. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00327">spi.c:327</a></div></div>
<div class="ttc" id="group___low___power_html_gab58ec15d0bda335aa71a0e60a37d3f23"><div class="ttname"><a href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a></div><div class="ttdeci">void enter_low_power_state(void)</div><div class="ttdoc">Decides whether to put EFM into EM0, EM1, or EM2 based on Activity. </div><div class="ttdef"><b>Definition:</b> <a href="low__power_8c_source.html#l00082">low_power.c:82</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga802afbf6aa97cd013063a170fd0b9d01"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a></div><div class="ttdeci">static void spiflash_spi_simple_completion(void *ref)</div><div class="ttdoc">Simple spi simple completion routine. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00285">spiflash.c:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga3ff84df85a60470c3b2a1640b5d38401"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_read </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Flash Read. </p>
<dl class="section note"><dt>Note</dt><dd>Calls spiflash_command_with_address to perform Read operation Will block if NULL passed for completion function; otherwise will call completion function passing ref argument</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address to read from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>How many bytes to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*buffer</td><td>Buffer to place read data into. Passed into spiflash_command_with_address function. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion function for Completion State_Machine </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00479">479</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00419">spiflash_command_with_address()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l01012">appl_read()</a>, <a class="el" href="demo__serial_8c_source.html#l00140">demo_serial()</a>, <a class="el" href="main_8c_source.html#l00784">run_read()</a>, and <a class="el" href="main_8c_source.html#l00896">run_rmw_normal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;{</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    uint8_t cmd;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordtype">int</span> dummy_bytes;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">if</span> (spiflash_info-&gt;read_slow)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        cmd = CMD_READ_ARRAY_SLOW;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        dummy_bytes = 0;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        cmd = CMD_READ_ARRAY;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        dummy_bytes = 1;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a>(cmd,</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                                  addr,</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                                  dummy_bytes,</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                  0, NULL,      <span class="comment">// tx</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                                  len, buffer,  <span class="comment">// rx</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                                  completion,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                                  completion_ref);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga234623d2faa1b7fb7933b3a17b1e6f2e"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a></div><div class="ttdeci">void spiflash_command_with_address(uint8_t cmd, uint32_t addr, unsigned int dummy_bytes, size_t tx_len, uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Command with Address. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00419">spiflash.c:419</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4f29d3eb34622d3d131210edbf9c8e51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spiflash_erase_completion1 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Erase Completion State 1(initial state) </p>
<dl class="section note"><dt>Note</dt><dd>First state in Erase completion process. Configures Write Enable. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00531">531</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00558">spiflash_erase_completion2()</a>, <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>, and <a class="el" href="spiflash_8c_source.html#l00285">spiflash_spi_simple_completion()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l00717">spiflash_erase()</a>, <a class="el" href="spiflash_8c_source.html#l00657">spiflash_erase_completion4()</a>, and <a class="el" href="spiflash_8c_source.html#l00673">spiflash_erase_completion5()</a>.</p>
<div class="fragment"><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;{</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">if</span> (! erase_len)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        spiflash_erase_busy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a>(ref);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">if</span> (spiflash_info-&gt;dataflash)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga11759ffd06963745c44b946693f913d8">spiflash_erase_completion2</a>(NULL);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a>(CMD_WRITE_ENABLE,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                                     0, NULL,  <span class="comment">// rx</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                                     <a class="code" href="group___adesto___flash_drivers.html#ga11759ffd06963745c44b946693f913d8">spiflash_erase_completion2</a>,</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                                     NULL);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2b03d647a43eef67874656ceb0f475a5"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a></div><div class="ttdeci">void spiflash_single_byte_command(uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Single Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00319">spiflash.c:319</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga11759ffd06963745c44b946693f913d8"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga11759ffd06963745c44b946693f913d8">spiflash_erase_completion2</a></div><div class="ttdeci">static void spiflash_erase_completion2(void *ref)</div><div class="ttdoc">SPI Erase Completion State 2. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00558">spiflash.c:558</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga802afbf6aa97cd013063a170fd0b9d01"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a></div><div class="ttdeci">static void spiflash_spi_simple_completion(void *ref)</div><div class="ttdoc">Simple spi simple completion routine. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00285">spiflash.c:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga11759ffd06963745c44b946693f913d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spiflash_erase_completion2 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Erase Completion State 2. </p>
<dl class="section note"><dt>Note</dt><dd>Issues ERASE Commands and checks what type of Erase is available on Device, checks address alignment </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00558">558</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00271">addr_aligned()</a>, <a class="el" href="spiflash_8c_source.html#l00419">spiflash_command_with_address()</a>, <a class="el" href="spiflash_8c_source.html#l00623">spiflash_erase_completion3()</a>, <a class="el" href="spiflash_8c_source.html#l00367">spiflash_multiple_byte_command()</a>, and <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l00531">spiflash_erase_completion1()</a>.</p>
<div class="fragment"><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">if</span> (erase_info_fixed)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        erase_info = erase_info_fixed;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">for</span> (i = spiflash_info-&gt;erase_info_count - 1; i &gt;= 0; i--)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            erase_info = &amp; spiflash_info-&gt;erase_info [i];</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="keywordflow">if</span> ((erase_len &gt;= erase_info-&gt;size) &amp;&amp;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                <a class="code" href="group___adesto___flash_drivers.html#gaf44fef2341a203b1472c8fc3ee92ab62">addr_aligned</a>(erase_addr, erase_info-&gt;size))</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">if</span> (i &lt; 0)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="comment">// no suitable erase command found!</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <span class="comment">// should never happen</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            erase_info = NULL;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                ;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> (erase_info-&gt;addr_needed)</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a>(erase_info-&gt;cmd,</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                                      erase_addr,</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                                      0,        <span class="comment">// dummy bytes</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                      0, NULL,  <span class="comment">// tx</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                                      0, NULL,  <span class="comment">// rx</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                                      <a class="code" href="group___adesto___flash_drivers.html#gab4a5762b3aabf337eec881e59246b445">spiflash_erase_completion3</a>,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                                      NULL);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (spiflash_info-&gt;dataflash)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="comment">// chip erase for dataflash doesn&#39;t need an address, but is a multibyte command</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a>(<span class="keyword">sizeof</span>(dataflash_cmd_chip_erase), dataflash_cmd_chip_erase,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                                       0, NULL, <span class="comment">// rx</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                                       <span class="keyword">false</span>, <span class="comment">// hold_cs_active</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                                       <a class="code" href="group___adesto___flash_drivers.html#gab4a5762b3aabf337eec881e59246b445">spiflash_erase_completion3</a>,</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                       NULL);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    }</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="comment">// chip erase doesn&#39;t need an address</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a>(erase_info-&gt;cmd,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                     0, NULL,  <span class="comment">// rx</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                     <a class="code" href="group___adesto___flash_drivers.html#gab4a5762b3aabf337eec881e59246b445">spiflash_erase_completion3</a>,</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                     NULL);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2b03d647a43eef67874656ceb0f475a5"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a></div><div class="ttdeci">void spiflash_single_byte_command(uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Single Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00319">spiflash.c:319</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga234623d2faa1b7fb7933b3a17b1e6f2e"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a></div><div class="ttdeci">void spiflash_command_with_address(uint8_t cmd, uint32_t addr, unsigned int dummy_bytes, size_t tx_len, uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Command with Address. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00419">spiflash.c:419</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_gab4a5762b3aabf337eec881e59246b445"><div class="ttname"><a href="group___adesto___flash_drivers.html#gab4a5762b3aabf337eec881e59246b445">spiflash_erase_completion3</a></div><div class="ttdeci">static void spiflash_erase_completion3(void *ref)</div><div class="ttdoc">SPI Erase Completion State 3. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00623">spiflash.c:623</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga9257fe096c874ec8e228c219f0720e8a"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a></div><div class="ttdeci">void spiflash_multiple_byte_command(size_t tx_len, const uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, bool hold_cs_active, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Multi-Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00367">spiflash.c:367</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_gaf44fef2341a203b1472c8fc3ee92ab62"><div class="ttname"><a href="group___adesto___flash_drivers.html#gaf44fef2341a203b1472c8fc3ee92ab62">addr_aligned</a></div><div class="ttdeci">static bool addr_aligned(uint32_t addr, size_t alignment_size)</div><div class="ttdoc">Checks if address is aligned on a power of 2. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00271">spiflash.c:271</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gab4a5762b3aabf337eec881e59246b445"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spiflash_erase_completion3 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Erase Completion State 3. </p>
<dl class="section note"><dt>Note</dt><dd>An erase command has been issued. Advance the address and decrease the length in preparation for the next iteration. If erase_len drops to zero, that will be handled when it gets back to Completion 1. Determines whether or not to use Active SO or not. If Active SO is used go to Read completion 4 if not skip to Read completion 5. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00623">623</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00657">spiflash_erase_completion4()</a>, <a class="el" href="spiflash_8c_source.html#l00673">spiflash_erase_completion5()</a>, and <a class="el" href="spiflash_8c_source.html#l00367">spiflash_multiple_byte_command()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l00558">spiflash_erase_completion2()</a>.</p>
<div class="fragment"><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;{</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    erase_addr += erase_info-&gt;size;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    erase_len -= erase_info-&gt;size;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">if</span> (spiflash_use_so_irq)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="comment">// use of SO is enabled, so issue ASI command</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        spiflash_scratch_buf[0] = CMD_ACTIVE_STATUS_INTERRUPT;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        spiflash_scratch_buf[1] = 0x00;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a>(1, spiflash_scratch_buf,  <span class="comment">// tx</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                       0, NULL,                  <span class="comment">// rx</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                                       <span class="keyword">true</span>,                     <span class="comment">// hold CS active</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                                       <a class="code" href="group___adesto___flash_drivers.html#ga38e3f9577a47d477243dc5c1673fece3">spiflash_erase_completion4</a>,</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                                       NULL);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="comment">// use of SO is disabled, so start polling status register</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        erase_status_buf[0] = spiflash_info-&gt;status_busy_level;  <span class="comment">// prime pump w/ BUSY</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#gaf98eafe46ea695ca330940a8cbc6c6e1">spiflash_erase_completion5</a>(NULL);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga38e3f9577a47d477243dc5c1673fece3"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga38e3f9577a47d477243dc5c1673fece3">spiflash_erase_completion4</a></div><div class="ttdeci">static void spiflash_erase_completion4(void *ref)</div><div class="ttdoc">SPI Erase Completion State 4. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00657">spiflash.c:657</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga9257fe096c874ec8e228c219f0720e8a"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a></div><div class="ttdeci">void spiflash_multiple_byte_command(size_t tx_len, const uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, bool hold_cs_active, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Multi-Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00367">spiflash.c:367</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_gaf98eafe46ea695ca330940a8cbc6c6e1"><div class="ttname"><a href="group___adesto___flash_drivers.html#gaf98eafe46ea695ca330940a8cbc6c6e1">spiflash_erase_completion5</a></div><div class="ttdeci">static void spiflash_erase_completion5(void *ref)</div><div class="ttdoc">SPI Erase Completion State 5. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00673">spiflash.c:673</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga38e3f9577a47d477243dc5c1673fece3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spiflash_erase_completion4 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Erase Completion State 4. </p>
<dl class="section note"><dt>Note</dt><dd>This Read Completion State is ONLY used if Active SO is enabled. Returns to Completion 1 when completed. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00657">657</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spi_8c_source.html#l00459">spi_wait_so()</a>, and <a class="el" href="spiflash_8c_source.html#l00531">spiflash_erase_completion1()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l00623">spiflash_erase_completion3()</a>.</p>
<div class="fragment"><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;{</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="group___s_p_i.html#ga7692b03652af590216211f3e2c261535">spi_wait_so</a>(spiflash_info-&gt;so_done_level,</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                    <a class="code" href="group___adesto___flash_drivers.html#ga4f29d3eb34622d3d131210edbf9c8e51">spiflash_erase_completion1</a>,</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                    NULL);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga4f29d3eb34622d3d131210edbf9c8e51"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga4f29d3eb34622d3d131210edbf9c8e51">spiflash_erase_completion1</a></div><div class="ttdeci">static void spiflash_erase_completion1(void *ref)</div><div class="ttdoc">SPI Erase Completion State 1(initial state) </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00531">spiflash.c:531</a></div></div>
<div class="ttc" id="group___s_p_i_html_ga7692b03652af590216211f3e2c261535"><div class="ttname"><a href="group___s_p_i.html#ga7692b03652af590216211f3e2c261535">spi_wait_so</a></div><div class="ttdeci">void spi_wait_so(uint8_t level, spi_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">Active SO Interrupt handler. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00459">spi.c:459</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaf98eafe46ea695ca330940a8cbc6c6e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spiflash_erase_completion5 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Erase Completion State 5. </p>
<dl class="section note"><dt>Note</dt><dd>This Read Completion State is ONLY used if Active SO is NOT used. Returns to Completion 1 when completed. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00673">673</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00531">spiflash_erase_completion1()</a>, and <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l00623">spiflash_erase_completion3()</a>.</p>
<div class="fragment"><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;{</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">if</span> ((erase_status_buf[0] &amp; spiflash_info-&gt;status_busy_mask) == spiflash_info-&gt;status_busy_level)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="comment">// BUSY</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a>(spiflash_info-&gt;read_status_cmd,</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                     1,</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                     erase_status_buf,</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                                     <a class="code" href="group___adesto___flash_drivers.html#gaf98eafe46ea695ca330940a8cbc6c6e1">spiflash_erase_completion5</a>,</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                                     NULL);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="comment">// DONE</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga4f29d3eb34622d3d131210edbf9c8e51">spiflash_erase_completion1</a>(NULL);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2b03d647a43eef67874656ceb0f475a5"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a></div><div class="ttdeci">void spiflash_single_byte_command(uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Single Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00319">spiflash.c:319</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga4f29d3eb34622d3d131210edbf9c8e51"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga4f29d3eb34622d3d131210edbf9c8e51">spiflash_erase_completion1</a></div><div class="ttdeci">static void spiflash_erase_completion1(void *ref)</div><div class="ttdoc">SPI Erase Completion State 1(initial state) </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00531">spiflash.c:531</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_gaf98eafe46ea695ca330940a8cbc6c6e1"><div class="ttname"><a href="group___adesto___flash_drivers.html#gaf98eafe46ea695ca330940a8cbc6c6e1">spiflash_erase_completion5</a></div><div class="ttdeci">static void spiflash_erase_completion5(void *ref)</div><div class="ttdoc">SPI Erase Completion State 5. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00673">spiflash.c:673</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4693e905f3ba71b0ce6c7e4f451c420b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spiflash_erase </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cmd_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_so_irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Flash Erase. </p>
<dl class="section note"><dt>Note</dt><dd>Top Level SPI Erase function, steps through Erase completion states. Determines if Active SO is to be used or not. Checks address alignment. Enters Low Power State during Erase. The erase commands will be ignored by the flash chip unless it has been previously write-enabled. Will return false, and never call completion function, if address is not erase page aligned or len is not a multiple of erase page size. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address to read from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>How many bytes to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd_size</td><td>Size of Command in Bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">use_so_irq</td><td>Determines whether or not Active SO is used or not. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true If successful </dd></dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00717">717</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00271">addr_aligned()</a>, <a class="el" href="low__power_8c_source.html#l00082">enter_low_power_state()</a>, <a class="el" href="spiflash_8c_source.html#l00531">spiflash_erase_completion1()</a>, and <a class="el" href="spiflash_8c_source.html#l00367">spiflash_multiple_byte_command()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00961">appl_erase()</a>, <a class="el" href="demo__serial_8c_source.html#l00140">demo_serial()</a>, <a class="el" href="main_8c_source.html#l00692">run_erase()</a>, and <a class="el" href="main_8c_source.html#l00896">run_rmw_normal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;{</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    spiflash_use_so_irq = use_so_irq &amp;&amp; spiflash_info-&gt;has_so_irq;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">if</span> (cmd_size)</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="comment">// The desired erase size per command was specified.</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="comment">// Find the matching erase command, and ensure the address is</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="comment">// suitably aligned and the erase size is a multiple of the</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="comment">// command size.</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="keywordflow">if</span> (len % cmd_size)</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">for</span> (i = spiflash_info-&gt;erase_info_count - 1; i &gt;= 0; i--)</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            erase_info_fixed = &amp; spiflash_info-&gt;erase_info [i];</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <span class="keywordflow">if</span> (cmd_size == erase_info_fixed-&gt;size)</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">if</span> (! found)</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            erase_info_fixed = NULL;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="comment">// No erase size per command was specified.</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="comment">// Ensure that there is a suitable choice.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">for</span> (i = spiflash_info-&gt;erase_info_count - 1; i &gt;= 0; i--)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            erase_info = &amp; spiflash_info-&gt;erase_info [i];</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="keywordflow">if</span> (len % erase_info-&gt;size)</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <span class="keywordflow">if</span> (! <a class="code" href="group___adesto___flash_drivers.html#gaf44fef2341a203b1472c8fc3ee92ab62">addr_aligned</a>(addr, erase_info-&gt;size))</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        erase_info = NULL;  <span class="comment">// will be chosen in spiflash_erase_completion2;</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordflow">if</span> (! found)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    erase_addr = addr;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    erase_len = len;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    spiflash_completion = completion;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    spiflash_completion_ref = completion_ref;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    spiflash_erase_busy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span> (spiflash_info-&gt;dataflash)</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a>(<span class="keyword">sizeof</span>(dataflash_cmd_disable_sector_protection), dataflash_cmd_disable_sector_protection,</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                                       0, NULL, <span class="comment">// rx</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                                       <span class="keyword">false</span>, <span class="comment">// hold_cs_active</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                                       <a class="code" href="group___adesto___flash_drivers.html#ga4f29d3eb34622d3d131210edbf9c8e51">spiflash_erase_completion1</a>,</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                                       NULL);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga4f29d3eb34622d3d131210edbf9c8e51">spiflash_erase_completion1</a>(NULL);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="comment">// if called synchronously, wait for entire write sequence to complete</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">if</span> (! completion)</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">while</span> (spiflash_erase_busy)</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <a class="code" href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a>();</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga4f29d3eb34622d3d131210edbf9c8e51"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga4f29d3eb34622d3d131210edbf9c8e51">spiflash_erase_completion1</a></div><div class="ttdeci">static void spiflash_erase_completion1(void *ref)</div><div class="ttdoc">SPI Erase Completion State 1(initial state) </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00531">spiflash.c:531</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga9257fe096c874ec8e228c219f0720e8a"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a></div><div class="ttdeci">void spiflash_multiple_byte_command(size_t tx_len, const uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, bool hold_cs_active, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Multi-Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00367">spiflash.c:367</a></div></div>
<div class="ttc" id="group___low___power_html_gab58ec15d0bda335aa71a0e60a37d3f23"><div class="ttname"><a href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a></div><div class="ttdeci">void enter_low_power_state(void)</div><div class="ttdoc">Decides whether to put EFM into EM0, EM1, or EM2 based on Activity. </div><div class="ttdef"><b>Definition:</b> <a href="low__power_8c_source.html#l00082">low_power.c:82</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_gaf44fef2341a203b1472c8fc3ee92ab62"><div class="ttname"><a href="group___adesto___flash_drivers.html#gaf44fef2341a203b1472c8fc3ee92ab62">addr_aligned</a></div><div class="ttdeci">static bool addr_aligned(uint32_t addr, size_t alignment_size)</div><div class="ttdoc">Checks if address is aligned on a power of 2. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00271">spiflash.c:271</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gab3a21ea4a25e15decdbb0c09217b3d96"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spiflash_write_completion1 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Write Completion State 1(initial state) </p>
<dl class="section note"><dt>Note</dt><dd>First State in Write completion process. Configures Write Enable. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00820">820</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>, <a class="el" href="spiflash_8c_source.html#l00285">spiflash_spi_simple_completion()</a>, and <a class="el" href="spiflash_8c_source.html#l00846">spiflash_write_completion2()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l00971">spiflash_write()</a>, <a class="el" href="spiflash_8c_source.html#l00915">spiflash_write_completion4()</a>, <a class="el" href="spiflash_8c_source.html#l00933">spiflash_write_completion5()</a>, and <a class="el" href="spiflash_8c_source.html#l01262">spiflash_write_otp()</a>.</p>
<div class="fragment"><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;{</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">if</span> (! write_len)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        spiflash_write_busy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a>(ref);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> (spiflash_info-&gt;dataflash)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#gae9a7f08ea97dea0f88b308f6f3a7d553">spiflash_write_completion2</a>(NULL);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a>(CMD_WRITE_ENABLE,</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                                     0, NULL,  <span class="comment">// rx</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                                     <a class="code" href="group___adesto___flash_drivers.html#gae9a7f08ea97dea0f88b308f6f3a7d553">spiflash_write_completion2</a>,</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                                     NULL);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2b03d647a43eef67874656ceb0f475a5"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a></div><div class="ttdeci">void spiflash_single_byte_command(uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Single Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00319">spiflash.c:319</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_gae9a7f08ea97dea0f88b308f6f3a7d553"><div class="ttname"><a href="group___adesto___flash_drivers.html#gae9a7f08ea97dea0f88b308f6f3a7d553">spiflash_write_completion2</a></div><div class="ttdeci">static void spiflash_write_completion2(void *ref)</div><div class="ttdoc">SPI Write Completion State 2. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00846">spiflash.c:846</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga802afbf6aa97cd013063a170fd0b9d01"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a></div><div class="ttdeci">static void spiflash_spi_simple_completion(void *ref)</div><div class="ttdoc">Simple spi simple completion routine. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00285">spiflash.c:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gae9a7f08ea97dea0f88b308f6f3a7d553"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spiflash_write_completion2 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Write Completion State 2. </p>
<dl class="section note"><dt>Note</dt><dd>Issues Write Command with Address and check Program Page size </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00846">846</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00419">spiflash_command_with_address()</a>, and <a class="el" href="spiflash_8c_source.html#l00875">spiflash_write_completion3()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l00820">spiflash_write_completion1()</a>.</p>
<div class="fragment"><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;{</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    write_size = write_len;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">if</span> ((write_addr &amp; ~(spiflash_info-&gt;program_page_size-1)) !=</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        ((write_addr + write_size - 1) &amp; ~(spiflash_info-&gt;program_page_size-1)))</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        write_size = spiflash_info-&gt;program_page_size - (write_addr &amp; (spiflash_info-&gt;program_page_size-1));</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a>(CMD_BYTE_PAGE_PROGRAM,</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                                  write_addr,</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                                  0, <span class="comment">// dummy bytes</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                                  write_size, write_data,  <span class="comment">// tx</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                                  0, NULL,                 <span class="comment">// rx</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                                  <a class="code" href="group___adesto___flash_drivers.html#ga23c4aba89465f421fe8e57d830a35f85">spiflash_write_completion3</a>,</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                                  NULL);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga234623d2faa1b7fb7933b3a17b1e6f2e"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a></div><div class="ttdeci">void spiflash_command_with_address(uint8_t cmd, uint32_t addr, unsigned int dummy_bytes, size_t tx_len, uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Command with Address. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00419">spiflash.c:419</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga23c4aba89465f421fe8e57d830a35f85"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga23c4aba89465f421fe8e57d830a35f85">spiflash_write_completion3</a></div><div class="ttdeci">static void spiflash_write_completion3(void *ref)</div><div class="ttdoc">SPI Write Completion State 3. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00875">spiflash.c:875</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga23c4aba89465f421fe8e57d830a35f85"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spiflash_write_completion3 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Write Completion State 3. </p>
<dl class="section note"><dt>Note</dt><dd>A write command has been issued. Advance the address and decrease the length in preparation for the next iteration. If erase_len drops to zero, that will be handled when it gets back to Completion 1. Determines whether or not to use Active SO or not. If Active SO is used go to Write completion 4 if not skip to Write completion 5. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00875">875</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00367">spiflash_multiple_byte_command()</a>, <a class="el" href="spiflash_8c_source.html#l00915">spiflash_write_completion4()</a>, and <a class="el" href="spiflash_8c_source.html#l00933">spiflash_write_completion5()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l00846">spiflash_write_completion2()</a>.</p>
<div class="fragment"><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;{</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="comment">// Write is in progress, but advance the address</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="comment">// and decrease the length in preparation for next</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="comment">// iteration.  If write_len drops to zero, that will</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="comment">// be handled when we get to</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="comment">// spiflash_write_completion1().</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    write_data += write_size;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    write_addr += write_size;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    write_len -= write_size;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">if</span> (spiflash_use_so_irq == 1)</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="comment">// use of SO is enabled, so issue ASI command</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        spiflash_scratch_buf[0] = CMD_ACTIVE_STATUS_INTERRUPT;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        spiflash_scratch_buf[1] = 0x00;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a>(2, spiflash_scratch_buf,  <span class="comment">// tx</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                                       0, NULL,                  <span class="comment">// rx</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                                       <span class="keyword">true</span>,                     <span class="comment">// hold CS active</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                                       <a class="code" href="group___adesto___flash_drivers.html#ga2f31bfac731c959f4279c335d6244ea3">spiflash_write_completion4</a>,</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                                       NULL);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="comment">// use of SO is disabled, so start polling status register</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        write_status_buf[0] = spiflash_info-&gt;status_busy_level;  <span class="comment">// prime pump w/ BUSY</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga44e65f28587374feade08a939ea286a1">spiflash_write_completion5</a>(NULL);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    }</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2f31bfac731c959f4279c335d6244ea3"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2f31bfac731c959f4279c335d6244ea3">spiflash_write_completion4</a></div><div class="ttdeci">static void spiflash_write_completion4(void *ref)</div><div class="ttdoc">SPI Write Completion State 4. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00915">spiflash.c:915</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga44e65f28587374feade08a939ea286a1"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga44e65f28587374feade08a939ea286a1">spiflash_write_completion5</a></div><div class="ttdeci">static void spiflash_write_completion5(void *ref)</div><div class="ttdoc">SPI Write Completion State 5. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00933">spiflash.c:933</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga9257fe096c874ec8e228c219f0720e8a"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a></div><div class="ttdeci">void spiflash_multiple_byte_command(size_t tx_len, const uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, bool hold_cs_active, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Multi-Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00367">spiflash.c:367</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga2f31bfac731c959f4279c335d6244ea3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spiflash_write_completion4 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Write Completion State 4. </p>
<dl class="section note"><dt>Note</dt><dd>This Write completion state is ONLY used if Active SO is enabled. Returns to Write completion 1 when completed. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00915">915</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spi_8c_source.html#l00459">spi_wait_so()</a>, and <a class="el" href="spiflash_8c_source.html#l00820">spiflash_write_completion1()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l00875">spiflash_write_completion3()</a>.</p>
<div class="fragment"><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;{</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="comment">// wait for flash chip to be done with command,</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="comment">// then invoke completion1</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <a class="code" href="group___s_p_i.html#ga7692b03652af590216211f3e2c261535">spi_wait_so</a>(spiflash_info-&gt;so_done_level,</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                <a class="code" href="group___adesto___flash_drivers.html#gab3a21ea4a25e15decdbb0c09217b3d96">spiflash_write_completion1</a>,</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                NULL);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_gab3a21ea4a25e15decdbb0c09217b3d96"><div class="ttname"><a href="group___adesto___flash_drivers.html#gab3a21ea4a25e15decdbb0c09217b3d96">spiflash_write_completion1</a></div><div class="ttdeci">static void spiflash_write_completion1(void *ref)</div><div class="ttdoc">SPI Write Completion State 1(initial state) </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00820">spiflash.c:820</a></div></div>
<div class="ttc" id="group___s_p_i_html_ga7692b03652af590216211f3e2c261535"><div class="ttname"><a href="group___s_p_i.html#ga7692b03652af590216211f3e2c261535">spi_wait_so</a></div><div class="ttdeci">void spi_wait_so(uint8_t level, spi_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">Active SO Interrupt handler. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00459">spi.c:459</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga44e65f28587374feade08a939ea286a1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spiflash_write_completion5 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Write Completion State 5. </p>
<dl class="section note"><dt>Note</dt><dd>This Write completion state is ONLY used if Active SO is NOT used. Returns to Write completion 1 when completed. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00933">933</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>, and <a class="el" href="spiflash_8c_source.html#l00820">spiflash_write_completion1()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l00875">spiflash_write_completion3()</a>.</p>
<div class="fragment"><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;{</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="keywordflow">if</span> ((write_status_buf[0] &amp; spiflash_info-&gt;status_busy_mask) == spiflash_info-&gt;status_busy_level)</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="comment">// BUSY</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a>(spiflash_info-&gt;read_status_cmd,</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                                     1,</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                                     write_status_buf,</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                                     <a class="code" href="group___adesto___flash_drivers.html#ga44e65f28587374feade08a939ea286a1">spiflash_write_completion5</a>,</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                                     NULL);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    }</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="comment">// DONE</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#gab3a21ea4a25e15decdbb0c09217b3d96">spiflash_write_completion1</a>(NULL);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_gab3a21ea4a25e15decdbb0c09217b3d96"><div class="ttname"><a href="group___adesto___flash_drivers.html#gab3a21ea4a25e15decdbb0c09217b3d96">spiflash_write_completion1</a></div><div class="ttdeci">static void spiflash_write_completion1(void *ref)</div><div class="ttdoc">SPI Write Completion State 1(initial state) </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00820">spiflash.c:820</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2b03d647a43eef67874656ceb0f475a5"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a></div><div class="ttdeci">void spiflash_single_byte_command(uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Single Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00319">spiflash.c:319</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga44e65f28587374feade08a939ea286a1"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga44e65f28587374feade08a939ea286a1">spiflash_write_completion5</a></div><div class="ttdeci">static void spiflash_write_completion5(void *ref)</div><div class="ttdoc">SPI Write Completion State 5. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00933">spiflash.c:933</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaa4aceecfc2b182f8298e96be69699fa2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_write </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_so_irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI Flash Write. </p>
<dl class="section note"><dt>Note</dt><dd>Top Level SPI Write function, steps through Write completion states. Determines if Active SO is to be used or not. Enters Low Power State during Write. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address to write to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>How many bytes to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*buffer</td><td>Pointer to data buffer to use for write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">use_so_irq</td><td>Determines whether or not Active SO is used or not. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l00971">971</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="low__power_8c_source.html#l00082">enter_low_power_state()</a>, <a class="el" href="spiflash_8c_source.html#l00367">spiflash_multiple_byte_command()</a>, and <a class="el" href="spiflash_8c_source.html#l00820">spiflash_write_completion1()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00979">appl_write()</a>, <a class="el" href="demo__serial_8c_source.html#l00140">demo_serial()</a>, <a class="el" href="main_8c_source.html#l00738">run_program()</a>, and <a class="el" href="main_8c_source.html#l00896">run_rmw_normal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;{</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    spiflash_use_so_irq = use_so_irq &amp;&amp; spiflash_info-&gt;has_so_irq;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    write_data = buffer;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    write_addr = addr;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    write_len = len;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    spiflash_completion = completion;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    spiflash_completion_ref = completion_ref;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    spiflash_write_busy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">if</span> (spiflash_info-&gt;dataflash)</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a>(<span class="keyword">sizeof</span>(dataflash_cmd_disable_sector_protection), dataflash_cmd_disable_sector_protection,</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                                       0, NULL, <span class="comment">// rx</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                                       <span class="keyword">false</span>, <span class="comment">// hold_cs_active</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                                       <a class="code" href="group___adesto___flash_drivers.html#gab3a21ea4a25e15decdbb0c09217b3d96">spiflash_write_completion1</a>,</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                                       NULL);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#gab3a21ea4a25e15decdbb0c09217b3d96">spiflash_write_completion1</a>(NULL);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="comment">// if called synchronously, wait for entire write sequence to complete</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">if</span> (! completion)</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="keywordflow">while</span> (spiflash_write_busy)</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            <a class="code" href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a>();</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_gab3a21ea4a25e15decdbb0c09217b3d96"><div class="ttname"><a href="group___adesto___flash_drivers.html#gab3a21ea4a25e15decdbb0c09217b3d96">spiflash_write_completion1</a></div><div class="ttdeci">static void spiflash_write_completion1(void *ref)</div><div class="ttdoc">SPI Write Completion State 1(initial state) </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00820">spiflash.c:820</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga9257fe096c874ec8e228c219f0720e8a"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a></div><div class="ttdeci">void spiflash_multiple_byte_command(size_t tx_len, const uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, bool hold_cs_active, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Multi-Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00367">spiflash.c:367</a></div></div>
<div class="ttc" id="group___low___power_html_gab58ec15d0bda335aa71a0e60a37d3f23"><div class="ttname"><a href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a></div><div class="ttdeci">void enter_low_power_state(void)</div><div class="ttdoc">Decides whether to put EFM into EM0, EM1, or EM2 based on Activity. </div><div class="ttdef"><b>Definition:</b> <a href="low__power_8c_source.html#l00082">low_power.c:82</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gac342dcf953e34c747952b925f7ffa15b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dataflash_rmw_completion1 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>DataFlash Read-Modify-Write Completion State 1(initial state) </p>
<dl class="section note"><dt>Note</dt><dd>First State in Write completion process. Sends RMW command </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01016">1016</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l01036">dataflash_rmw_completion2()</a>, and <a class="el" href="spiflash_8c_source.html#l00419">spiflash_command_with_address()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l01095">dataflash_rmw()</a>.</p>
<div class="fragment"><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;{</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a>(CMD_DATAFLASH_RMW_BUF1,</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                                  write_addr,</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                                  0, <span class="comment">// dummy bytes</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                                  write_size, write_data,  <span class="comment">// tx</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                                  0, NULL,                 <span class="comment">// rx</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                                  <a class="code" href="group___adesto___flash_drivers.html#ga23109973f56d9ff334994fda708eb471">dataflash_rmw_completion2</a>,</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                                  NULL);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga234623d2faa1b7fb7933b3a17b1e6f2e"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a></div><div class="ttdeci">void spiflash_command_with_address(uint8_t cmd, uint32_t addr, unsigned int dummy_bytes, size_t tx_len, uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Command with Address. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00419">spiflash.c:419</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga23109973f56d9ff334994fda708eb471"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga23109973f56d9ff334994fda708eb471">dataflash_rmw_completion2</a></div><div class="ttdeci">static void dataflash_rmw_completion2(void *ref)</div><div class="ttdoc">DataFlash Read-Modify-Write Completion State 2. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l01036">spiflash.c:1036</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga23109973f56d9ff334994fda708eb471"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dataflash_rmw_completion2 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>DataFlash Read-Modify-Write Completion State 2. </p>
<dl class="section note"><dt>Note</dt><dd>Second State in DataFlash Read-Modify-Write completion process. Starts polling Status Register. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01036">1036</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l01052">dataflash_rmw_completion3()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l01016">dataflash_rmw_completion1()</a>.</p>
<div class="fragment"><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;{</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="comment">// start polling status register</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    write_status_buf[0] = spiflash_info-&gt;status_busy_level;  <span class="comment">// prime pump w/ BUSY</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga557a31339763a26d1da79ce12e1018cc">dataflash_rmw_completion3</a>(NULL);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga557a31339763a26d1da79ce12e1018cc"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga557a31339763a26d1da79ce12e1018cc">dataflash_rmw_completion3</a></div><div class="ttdeci">static void dataflash_rmw_completion3(void *ref)</div><div class="ttdoc">DataFlash Read-Modify-Write Completion State 3. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l01052">spiflash.c:1052</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga557a31339763a26d1da79ce12e1018cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dataflash_rmw_completion3 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>DataFlash Read-Modify-Write Completion State 3. </p>
<dl class="section note"><dt>Note</dt><dd>Third(last) State in DataFlash Read-Modify-Write completion process. Continues polling Status Register. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01052">1052</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>, and <a class="el" href="spiflash_8c_source.html#l00285">spiflash_spi_simple_completion()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l01036">dataflash_rmw_completion2()</a>.</p>
<div class="fragment"><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;{</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="comment">// poll the status register</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="comment">// until the flash indicates that the RMW is done.</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">if</span> ((write_status_buf[0] &amp; spiflash_info-&gt;status_busy_mask) == spiflash_info-&gt;status_busy_level)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="comment">// BUSY</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a>(spiflash_info-&gt;read_status_cmd,</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                                     1,</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                                     write_status_buf,</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                                     <a class="code" href="group___adesto___flash_drivers.html#ga557a31339763a26d1da79ce12e1018cc">dataflash_rmw_completion3</a>,</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                                     NULL);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    }</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="comment">// DONE</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        spiflash_write_busy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a>(ref);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2b03d647a43eef67874656ceb0f475a5"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a></div><div class="ttdeci">void spiflash_single_byte_command(uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Single Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00319">spiflash.c:319</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga557a31339763a26d1da79ce12e1018cc"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga557a31339763a26d1da79ce12e1018cc">dataflash_rmw_completion3</a></div><div class="ttdeci">static void dataflash_rmw_completion3(void *ref)</div><div class="ttdoc">DataFlash Read-Modify-Write Completion State 3. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l01052">spiflash.c:1052</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga802afbf6aa97cd013063a170fd0b9d01"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga802afbf6aa97cd013063a170fd0b9d01">spiflash_spi_simple_completion</a></div><div class="ttdeci">static void spiflash_spi_simple_completion(void *ref)</div><div class="ttdoc">Simple spi simple completion routine. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00285">spiflash.c:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gafe7e56bc15d57c891233dba867161f7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dataflash_rmw </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>SPI DataFlash Read-Modify-Write Function. </p>
<dl class="section note"><dt>Note</dt><dd>Perform RMW operation on a page of dataflash, steps through RMW completion states. Enters Low Power State during Write.</dd></dl>
<p>Reponsibilities of caller: ensure that check that part is dataflash ensure that len is not greater than page length ensure that addr + len does not cross a page boundary </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address to read from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>How many bytes to update/perform RMW </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*buffer</td><td>Pointer to data buffer to use for write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01095">1095</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l01016">dataflash_rmw_completion1()</a>, <a class="el" href="low__power_8c_source.html#l00082">enter_low_power_state()</a>, and <a class="el" href="spiflash_8c_source.html#l00367">spiflash_multiple_byte_command()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00855">run_rmw_dataflash()</a>.</p>
<div class="fragment"><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;{</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    write_data = buffer;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    write_addr = addr;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    write_len = len;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    spiflash_completion = completion;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    spiflash_completion_ref = completion_ref;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    spiflash_write_busy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a>(<span class="keyword">sizeof</span>(dataflash_cmd_disable_sector_protection), dataflash_cmd_disable_sector_protection,</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                                   0, NULL, <span class="comment">// rx</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                                   <span class="keyword">false</span>, <span class="comment">// hold_cs_active</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                                   <a class="code" href="group___adesto___flash_drivers.html#gac342dcf953e34c747952b925f7ffa15b">dataflash_rmw_completion1</a>,</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                                   NULL);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="comment">// if called synchronously, wait for entire write sequence to complete</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="keywordflow">if</span> (! completion)</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="keywordflow">while</span> (spiflash_write_busy)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            <a class="code" href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a>();</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_gac342dcf953e34c747952b925f7ffa15b"><div class="ttname"><a href="group___adesto___flash_drivers.html#gac342dcf953e34c747952b925f7ffa15b">dataflash_rmw_completion1</a></div><div class="ttdeci">static void dataflash_rmw_completion1(void *ref)</div><div class="ttdoc">DataFlash Read-Modify-Write Completion State 1(initial state) </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l01016">spiflash.c:1016</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga9257fe096c874ec8e228c219f0720e8a"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a></div><div class="ttdeci">void spiflash_multiple_byte_command(size_t tx_len, const uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, bool hold_cs_active, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Multi-Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00367">spiflash.c:367</a></div></div>
<div class="ttc" id="group___low___power_html_gab58ec15d0bda335aa71a0e60a37d3f23"><div class="ttname"><a href="group___low___power.html#gab58ec15d0bda335aa71a0e60a37d3f23">enter_low_power_state</a></div><div class="ttdeci">void enter_low_power_state(void)</div><div class="ttdoc">Decides whether to put EFM into EM0, EM1, or EM2 based on Activity. </div><div class="ttdef"><b>Definition:</b> <a href="low__power_8c_source.html#l00082">low_power.c:82</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga2fce6429b340b5157119e9db80f3807f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_set_write_enable </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Send Write Enable/Disable Command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*ref</td><td>Completion Function Pointer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01127">1127</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00738">run_program()</a>, <a class="el" href="main_8c_source.html#l00452">test_start()</a>, and <a class="el" href="demo__serial_8c_source.html#l00111">write_enable()</a>.</p>
<div class="fragment"><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;{</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a>(enable ? CMD_WRITE_ENABLE : CMD_WRITE_DISABLE,</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                                 0, NULL,  <span class="comment">// rx</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                                 completion,</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                                 completion_ref);</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2b03d647a43eef67874656ceb0f475a5"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a></div><div class="ttdeci">void spiflash_single_byte_command(uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Single Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00319">spiflash.c:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga3565e672698a1e2a14a8d7ada7a1b7c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_set_sector_protection </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>protect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Send Sector Protect/Unprotect Command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">protect</td><td>True/False </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Address/Sector to protect </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01149">1149</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00419">spiflash_command_with_address()</a>.</p>

<p>Referenced by <a class="el" href="demo__serial_8c_source.html#l00140">demo_serial()</a>.</p>
<div class="fragment"><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;{</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a>(protect? CMD_PROTECT_SECTOR : CMD_UNPROTECT_SECTOR,</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                                  addr,</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                                  0, <span class="comment">// dummy bytes</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                                  0, NULL,  <span class="comment">// tx</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                                  0, NULL,  <span class="comment">// rx</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                                  completion,</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                                  completion_ref);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga234623d2faa1b7fb7933b3a17b1e6f2e"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a></div><div class="ttdeci">void spiflash_command_with_address(uint8_t cmd, uint32_t addr, unsigned int dummy_bytes, size_t tx_len, uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Command with Address. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00419">spiflash.c:419</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga089adb24549564837ea0b4eafd1f22d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_set_global_protect </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>protect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Send Global Protect Command. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">protect</td><td>True/False </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01174">1174</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00367">spiflash_multiple_byte_command()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00452">test_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;{</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    spiflash_scratch_buf[0] = CMD_WRITE_STATUS_REG_BYTE_1;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    spiflash_scratch_buf[1] = protect ? 0x3c : 0x00;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a>(2, spiflash_scratch_buf,  <span class="comment">// tx</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                                   0, NULL, <span class="comment">// rx</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                                   <span class="keyword">false</span>,  <span class="comment">// hold_cs_active</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                                   completion,</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                                   completion_ref);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga9257fe096c874ec8e228c219f0720e8a"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a></div><div class="ttdeci">void spiflash_multiple_byte_command(size_t tx_len, const uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, bool hold_cs_active, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Multi-Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00367">spiflash.c:367</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gae65c98d024b208f13e9a82a11d72ee73"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_reset </td>
          <td>(</td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Send Reset Command. </p>
<dl class="section note"><dt>Note</dt><dd>Currently not being used...untested The reset command will be ignored by the flash chip unless it has been previously enabled by writing a 1 to the RSTE bit of the status register</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01202">1202</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00367">spiflash_multiple_byte_command()</a>.</p>
<div class="fragment"><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;{</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    spiflash_scratch_buf[0] = CMD_RESET;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    spiflash_scratch_buf[1] = ARG_RESET;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a>(2, spiflash_scratch_buf,  <span class="comment">// tx</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                                   0, NULL, <span class="comment">// rx</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                                   <span class="keyword">false</span>,  <span class="comment">// hold_cs_active</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                                   completion,</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                                   completion_ref);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga9257fe096c874ec8e228c219f0720e8a"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a></div><div class="ttdeci">void spiflash_multiple_byte_command(size_t tx_len, const uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, bool hold_cs_active, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Multi-Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00367">spiflash.c:367</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga0f2f3bcd7f1fbc3220f44e14232a92be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_read_otp </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Send Read OTP command. </p>
<dl class="section note"><dt>Note</dt><dd>Currently not being used...untested </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>OTP Address to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>How many OTP bytes to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Pointer</td><td>to buffer to store read bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01231">1231</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00419">spiflash_command_with_address()</a>.</p>
<div class="fragment"><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;{</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a>(CMD_READ_OTP,</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                                  addr,</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                                  2,  <span class="comment">// dummy bytes</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                                  0, NULL,      <span class="comment">// tx</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                                  len, buffer,  <span class="comment">// rx</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                                  completion,</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                                  completion_ref);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga234623d2faa1b7fb7933b3a17b1e6f2e"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a></div><div class="ttdeci">void spiflash_command_with_address(uint8_t cmd, uint32_t addr, unsigned int dummy_bytes, size_t tx_len, uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Command with Address. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00419">spiflash.c:419</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaf29ddeb2b1fcf847cf60d8759e5b35a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_write_otp </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Send Write OTP command. </p>
<dl class="section note"><dt>Note</dt><dd>Currently not being used...untested </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>OTP Address to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>How many OTP bytes to write </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*buffer</td><td>Pointer to buffer with data to write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01262">1262</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00419">spiflash_command_with_address()</a>, and <a class="el" href="spiflash_8c_source.html#l00820">spiflash_write_completion1()</a>.</p>
<div class="fragment"><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;{</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a>(CMD_PROGRAM_OTP,</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                                  addr,</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                                  0, <span class="comment">// dummy bytes</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                                  len, buffer,  <span class="comment">// tx</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                                  0, NULL,      <span class="comment">// rx</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                                  <a class="code" href="group___adesto___flash_drivers.html#gab3a21ea4a25e15decdbb0c09217b3d96">spiflash_write_completion1</a>,</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                                  NULL);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_gab3a21ea4a25e15decdbb0c09217b3d96"><div class="ttname"><a href="group___adesto___flash_drivers.html#gab3a21ea4a25e15decdbb0c09217b3d96">spiflash_write_completion1</a></div><div class="ttdeci">static void spiflash_write_completion1(void *ref)</div><div class="ttdoc">SPI Write Completion State 1(initial state) </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00820">spiflash.c:820</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga234623d2faa1b7fb7933b3a17b1e6f2e"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga234623d2faa1b7fb7933b3a17b1e6f2e">spiflash_command_with_address</a></div><div class="ttdeci">void spiflash_command_with_address(uint8_t cmd, uint32_t addr, unsigned int dummy_bytes, size_t tx_len, uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Command with Address. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00419">spiflash.c:419</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4d551516fc83d3aae41b4987b8349df6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_read_status </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Read Status Register. </p>
<dl class="section note"><dt>Note</dt><dd>For Adesto AT25XE021A and AT25XE041B, there are two bytes which can be read with a single call with len == 2. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Number bytes to read </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*buffer</td><td>Pointer to buffer store read bytes to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01292">1292</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>.</p>

<p>Referenced by <a class="el" href="spiflash_8c_source.html#l01414">dataflash_get_page_size()</a>, <a class="el" href="spiflash_8c_source.html#l01436">dataflash_set_page_size()</a>, <a class="el" href="demo__serial_8c_source.html#l00097">get_status()</a>, and <a class="el" href="main_8c_source.html#l00452">test_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;{</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a>(spiflash_info-&gt;read_status_cmd,</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                                 len,</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                                 buffer,</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                                 completion,</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                                 completion_ref);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2b03d647a43eef67874656ceb0f475a5"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a></div><div class="ttdeci">void spiflash_single_byte_command(uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Single Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00319">spiflash.c:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga89e9b3d3cef2503f7857897e834ecb5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_write_status </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Write First Status Register. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Byte to write to status register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gadcefeebcf7e0d704fa2ae8518358650b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_write_status2 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Write Second Status Register. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Byte to write to status register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab1d95c936880a6f204162f4e0b13fb71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_read_id </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Read Device ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Byte to write to status register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*buffer</td><td>Pointer to buffer to store Device ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01344">1344</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>.</p>

<p>Referenced by <a class="el" href="demo__serial_8c_source.html#l00060">read_id()</a>, and <a class="el" href="spiflash_8c_source.html#l01480">spiflash_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;{</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a>(CMD_READ_ID,</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                                 len, buffer, <span class="comment">// rx</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                                 completion,</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                                 completion_ref);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2b03d647a43eef67874656ceb0f475a5"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a></div><div class="ttdeci">void spiflash_single_byte_command(uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Single Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00319">spiflash.c:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaccb9b47d267fe4fe7a227255d72da033"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_deep_power_down </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>power_down</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Enter/Resume from Deep PowerDown. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">power_down</td><td>True=Enter Deep PowerDown, False=Resume from Deep PowerDown </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01365">1365</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l01099">run_powerdn()</a>, and <a class="el" href="spiflash_8c_source.html#l01480">spiflash_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;{</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a>(power_down ? CMD_DEEP_POWER_DOWN : CMD_RESUME_FROM_DEEP_POWER_DOWN,</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                                 0, NULL,  <span class="comment">// rx</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                                 completion,</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                                 completion_ref);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2b03d647a43eef67874656ceb0f475a5"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a></div><div class="ttdeci">void spiflash_single_byte_command(uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Single Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00319">spiflash.c:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gad5f2379bf9e55111af2df65e0b0dc1ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spiflash_ultra_deep_power_down </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>power_down</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">spiflash_completion_fn_t *&#160;</td>
          <td class="paramname"><em>completion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>completion_ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Enter/Resume from Ultra Deep PowerDown. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">power_down</td><td>True=Enter Ultra Deep PowerDown, False=Resume from Ultra Deep PowerDown </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion</td><td>Completion Function pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*completion_ref</td><td>Argument to be passed to completion callback function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01386">1386</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00319">spiflash_single_byte_command()</a>.</p>

<p>Referenced by <a class="el" href="demo__serial_8c_source.html#l00140">demo_serial()</a>, <a class="el" href="main_8c_source.html#l01367">main()</a>, <a class="el" href="main_8c_source.html#l01099">run_powerdn()</a>, <a class="el" href="main_8c_source.html#l00452">test_start()</a>, and <a class="el" href="main_8c_source.html#l00490">test_stop()</a>.</p>
<div class="fragment"><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;{</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="comment">// any command can be used to resume; device will otherwise ignore the cmd</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a>(power_down ? CMD_ULTRA_DEEP_POWER_DOWN : CMD_RESUME_FROM_DEEP_POWER_DOWN,</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                                 0, NULL,  <span class="comment">// rx</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                                 completion,</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                                 completion_ref);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga2b03d647a43eef67874656ceb0f475a5"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga2b03d647a43eef67874656ceb0f475a5">spiflash_single_byte_command</a></div><div class="ttdeci">void spiflash_single_byte_command(uint8_t cmd, size_t rx_len, uint8_t *rx_buf, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Single Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00319">spiflash.c:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga71af2f398b0ab9019a5901e950bd9393"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spiflash_is_dataflash </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Determines if Device is DataFlash or note. </p>
<dl class="section return"><dt>Returns</dt><dd>TRUE/FALSE Looks up in Device table if device is Dataflash type: True/False </dd></dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01404">1404</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00944">run_rmw()</a>.</p>
<div class="fragment"><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;{</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordflow">return</span> spiflash_info-&gt;dataflash;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga7092383a12cfad7251c88b67064203d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t dataflash_get_page_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Get DataFlash Page Size. </p>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01414">1414</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l01292">spiflash_read_status()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l01367">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;{</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    uint8_t status_buf[2];</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordflow">if</span> (! spiflash_info-&gt;dataflash)</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga4d551516fc83d3aae41b4987b8349df6">spiflash_read_status</a>(<span class="keyword">sizeof</span>(status_buf), status_buf, NULL, NULL);</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keywordflow">if</span> (status_buf[0] &amp; 1)</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        <span class="keywordflow">return</span> 256;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <span class="keywordflow">return</span> 264;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga4d551516fc83d3aae41b4987b8349df6"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga4d551516fc83d3aae41b4987b8349df6">spiflash_read_status</a></div><div class="ttdeci">void spiflash_read_status(size_t len, uint8_t *buffer, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">Read Status Register. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l01292">spiflash.c:1292</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga12b28bad4bc5d4243fc83b3159060cbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dataflash_set_page_size </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>page_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Set DataFlash Page Size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">page_size</td><td>Page size to set for DataFlash </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01436">1436</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spiflash_8c_source.html#l00367">spiflash_multiple_byte_command()</a>, and <a class="el" href="spiflash_8c_source.html#l01292">spiflash_read_status()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l01367">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;{</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keyword">const</span> uint8_t *cmd;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    uint8_t status_buf[2];</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordtype">int</span> cmd_len;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordflow">if</span> (! spiflash_info-&gt;dataflash)</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">if</span> (page_size == 256)</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        cmd = dataflash_cmd_set_256b_page;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        cmd_len = <span class="keyword">sizeof</span>(dataflash_cmd_set_256b_page);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    }</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (page_size == 264)</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    {</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        cmd = dataflash_cmd_set_264b_page;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        cmd_len = <span class="keyword">sizeof</span>(dataflash_cmd_set_264b_page);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    }</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a>(cmd_len, cmd,  <span class="comment">// tx</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                                   0, NULL, <span class="comment">// rx</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                                   <span class="keyword">false</span>,  <span class="comment">// hold_cs_active</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                                   NULL,</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                                   NULL);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <a class="code" href="group___adesto___flash_drivers.html#ga4d551516fc83d3aae41b4987b8349df6">spiflash_read_status</a>(<span class="keyword">sizeof</span>(status_buf), status_buf, NULL, NULL);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordflow">while</span> ((status_buf[0] &amp; spiflash_info-&gt;status_busy_mask) == spiflash_info-&gt;status_busy_level);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keywordflow">if</span> (status_buf[0] &amp; 1)</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <span class="keywordflow">return</span> page_size == 256;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <span class="keywordflow">return</span> page_size == 264;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;}</div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga9257fe096c874ec8e228c219f0720e8a"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga9257fe096c874ec8e228c219f0720e8a">spiflash_multiple_byte_command</a></div><div class="ttdeci">void spiflash_multiple_byte_command(size_t tx_len, const uint8_t *tx_buf, size_t rx_len, uint8_t *rx_buf, bool hold_cs_active, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">SPI Flash Multi-Byte Command. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l00367">spiflash.c:367</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_ga4d551516fc83d3aae41b4987b8349df6"><div class="ttname"><a href="group___adesto___flash_drivers.html#ga4d551516fc83d3aae41b4987b8349df6">spiflash_read_status</a></div><div class="ttdeci">void spiflash_read_status(size_t len, uint8_t *buffer, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">Read Status Register. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l01292">spiflash.c:1292</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gabf4fd8bbda8f88f5f64f73e2a899f7b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">spiflash_id_t spiflash_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bit_rate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Initialize SPI Bus, Read Device ID, Determine Device properties. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bit_rate</td><td>Sets SPI Bit Rate </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01480">1480</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>References <a class="el" href="spi_8c_source.html#l00526">spi_init()</a>, <a class="el" href="spiflash_8c_source.html#l01365">spiflash_deep_power_down()</a>, and <a class="el" href="spiflash_8c_source.html#l01344">spiflash_read_id()</a>.</p>

<p>Referenced by <a class="el" href="demo__serial_8c_source.html#l00140">demo_serial()</a>, and <a class="el" href="main_8c_source.html#l00114">spiflash_setup()</a>.</p>
<div class="fragment"><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;{</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="keyword">const</span> <a class="code" href="structspiflash__info__t.html">spiflash_info_t</a> *p;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <a class="code" href="group___s_p_i.html#gae4fdb45bc59bf5e40fb1b81fa23dc83d">spi_init</a>(bit_rate);</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    spiflash_busy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    spiflash_info = NULL;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="comment">// issue a resume from deep power down synchronously</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#gaccb9b47d267fe4fe7a227255d72da033">spiflash_deep_power_down</a>(<span class="keyword">false</span>, NULL, NULL);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#gaccb9b47d267fe4fe7a227255d72da033">spiflash_deep_power_down</a>(<span class="keyword">false</span>, NULL, NULL);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="comment">// issue a read ID command synchronously</span></div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <a class="code" href="group___adesto___flash_drivers.html#gab1d95c936880a6f204162f4e0b13fb71">spiflash_read_id</a>(MAX_FLASH_ID_LEN, spiflash_scratch_buf, NULL, NULL);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; SPIFLASH_INFO_TABLE_SIZE; i++)</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    {</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        p = &amp; spiflash_info_table[i];</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;        <span class="keywordflow">if</span> (memcmp(spiflash_scratch_buf, p-&gt;id_bytes, p-&gt;id_size) == 0)</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;            spiflash_info = p;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;            <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        }</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    }</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keywordflow">return</span> PART_UNKNOWN;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;}</div>
<div class="ttc" id="group___s_p_i_html_gae4fdb45bc59bf5e40fb1b81fa23dc83d"><div class="ttname"><a href="group___s_p_i.html#gae4fdb45bc59bf5e40fb1b81fa23dc83d">spi_init</a></div><div class="ttdeci">void spi_init(int bit_rate)</div><div class="ttdoc">SPI/USART Initialization. </div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00526">spi.c:526</a></div></div>
<div class="ttc" id="structspiflash__info__t_html"><div class="ttname"><a href="structspiflash__info__t.html">spiflash_info_t</a></div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8h_source.html#l00073">spiflash.h:73</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_gaccb9b47d267fe4fe7a227255d72da033"><div class="ttname"><a href="group___adesto___flash_drivers.html#gaccb9b47d267fe4fe7a227255d72da033">spiflash_deep_power_down</a></div><div class="ttdeci">void spiflash_deep_power_down(bool power_down, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">Enter/Resume from Deep PowerDown. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l01365">spiflash.c:1365</a></div></div>
<div class="ttc" id="group___adesto___flash_drivers_html_gab1d95c936880a6f204162f4e0b13fb71"><div class="ttname"><a href="group___adesto___flash_drivers.html#gab1d95c936880a6f204162f4e0b13fb71">spiflash_read_id</a></div><div class="ttdeci">void spiflash_read_id(size_t len, uint8_t *buffer, spiflash_completion_fn_t *completion, void *completion_ref)</div><div class="ttdoc">Read Device ID. </div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8c_source.html#l01344">spiflash.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga72c51f2e5a685e69165f1bc28f085a6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t spiflash_smallest_erase_size_above </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;spiflash.c&gt;</code></p>

<p>Determine smallest Erase Page Size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Erase size </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="spiflash_8c_source.html#l01516">1516</a> of file <a class="el" href="spiflash_8c_source.html">spiflash.c</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l01235">leave_conf_erase_size()</a>, and <a class="el" href="main_8c_source.html#l01367">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;{</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="keyword">const</span> <a class="code" href="structerase__info__t.html">erase_info_t</a> *ei;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; spiflash_info-&gt;erase_info_count; i++)</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    {</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        ei = &amp; spiflash_info-&gt;erase_info [i];</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        <span class="keywordflow">if</span> (ei-&gt;size &gt; size)</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;            <span class="keywordflow">return</span> ei-&gt;size;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    }</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;}</div>
<div class="ttc" id="structerase__info__t_html"><div class="ttname"><a href="structerase__info__t.html">erase_info_t</a></div><div class="ttdef"><b>Definition:</b> <a href="spiflash_8h_source.html#l00064">spiflash.h:64</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri May 20 2016 18:34:58 for Adesto Flash Demo by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
